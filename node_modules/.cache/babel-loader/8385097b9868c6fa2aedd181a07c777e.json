{"ast":null,"code":"\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport FileTwoTone from \"@ant-design/icons/es/icons/FileTwoTone\";\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport PaperClipOutlined from \"@ant-design/icons/es/icons/PaperClipOutlined\";\nimport PictureTwoTone from \"@ant-design/icons/es/icons/PictureTwoTone\";\nimport classNames from 'classnames';\nimport CSSMotion, { CSSMotionList } from 'rc-motion';\nimport omit from \"rc-util/es/omit\";\nimport useForceUpdate from '../../_util/hooks/useForceUpdate';\nimport initCollapseMotion from '../../_util/motion';\nimport { cloneElement } from '../../_util/reactNode';\nimport Button from '../../button';\nimport { ConfigContext } from '../../config-provider';\nimport { isImageUrl, previewImage } from '../utils';\nimport ListItem from './ListItem';\n\nconst InternalUploadList = (props, ref) => {\n  const {\n    listType = 'text',\n    previewFile = previewImage,\n    onPreview,\n    onDownload,\n    onRemove,\n    locale,\n    iconRender,\n    isImageUrl: isImgUrl = isImageUrl,\n    prefixCls: customizePrefixCls,\n    items = [],\n    showPreviewIcon = true,\n    showRemoveIcon = true,\n    showDownloadIcon = false,\n    removeIcon,\n    previewIcon,\n    downloadIcon,\n    extra,\n    progress = {\n      size: [-1, 2],\n      showInfo: false\n    },\n    appendAction,\n    appendActionVisible = true,\n    itemRender,\n    disabled\n  } = props;\n  const forceUpdate = useForceUpdate();\n  const [motionAppear, setMotionAppear] = React.useState(false);\n  const isPictureCardOrCirle = ['picture-card', 'picture-circle'].includes(listType); // ============================= Effect =============================\n\n  React.useEffect(() => {\n    if (!listType.startsWith('picture')) {\n      return;\n    }\n\n    (items || []).forEach(file => {\n      if (!(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n        return;\n      }\n\n      file.thumbUrl = '';\n      previewFile === null || previewFile === void 0 ? void 0 : previewFile(file.originFileObj).then(previewDataUrl => {\n        // Need append '' to avoid dead loop\n        file.thumbUrl = previewDataUrl || '';\n        forceUpdate();\n      });\n    });\n  }, [listType, items, previewFile]);\n  React.useEffect(() => {\n    setMotionAppear(true);\n  }, []); // ============================= Events =============================\n\n  const onInternalPreview = (file, e) => {\n    if (!onPreview) {\n      return;\n    }\n\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    return onPreview(file);\n  };\n\n  const onInternalDownload = file => {\n    if (typeof onDownload === 'function') {\n      onDownload(file);\n    } else if (file.url) {\n      window.open(file.url);\n    }\n  };\n\n  const onInternalClose = file => {\n    onRemove === null || onRemove === void 0 ? void 0 : onRemove(file);\n  };\n\n  const internalIconRender = file => {\n    if (iconRender) {\n      return iconRender(file, listType);\n    }\n\n    const isLoading = file.status === 'uploading';\n\n    if (listType.startsWith('picture')) {\n      const loadingIcon = listType === 'picture' ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : locale.uploading;\n      const fileIcon = (isImgUrl === null || isImgUrl === void 0 ? void 0 : isImgUrl(file)) ? /*#__PURE__*/React.createElement(PictureTwoTone, null) : /*#__PURE__*/React.createElement(FileTwoTone, null);\n      return isLoading ? loadingIcon : fileIcon;\n    }\n\n    return isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : /*#__PURE__*/React.createElement(PaperClipOutlined, null);\n  };\n\n  const actionIconRender = (customIcon, callback, prefixCls, title, acceptUploadDisabled) => {\n    const btnProps = {\n      type: 'text',\n      size: 'small',\n      title,\n      onClick: e => {\n        var _a, _b;\n\n        callback();\n\n        if ( /*#__PURE__*/React.isValidElement(customIcon)) {\n          (_b = (_a = customIcon.props).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        }\n      },\n      className: `${prefixCls}-list-item-action`,\n      disabled: acceptUploadDisabled ? disabled : false\n    };\n    return /*#__PURE__*/React.isValidElement(customIcon) ? /*#__PURE__*/React.createElement(Button, Object.assign({}, btnProps, {\n      icon: cloneElement(customIcon, Object.assign(Object.assign({}, customIcon.props), {\n        onClick: () => {}\n      }))\n    })) : /*#__PURE__*/React.createElement(Button, Object.assign({}, btnProps), /*#__PURE__*/React.createElement(\"span\", null, customIcon));\n  }; // ============================== Ref ===============================\n  // Test needs\n\n\n  React.useImperativeHandle(ref, () => ({\n    handlePreview: onInternalPreview,\n    handleDownload: onInternalDownload\n  }));\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext); // ============================= Render =============================\n\n  const prefixCls = getPrefixCls('upload', customizePrefixCls);\n  const rootPrefixCls = getPrefixCls();\n  const listClassNames = classNames(`${prefixCls}-list`, `${prefixCls}-list-${listType}`);\n  const listItemMotion = React.useMemo(() => omit(initCollapseMotion(rootPrefixCls), ['onAppearEnd', 'onEnterEnd', 'onLeaveEnd']), [rootPrefixCls]);\n  const motionConfig = Object.assign(Object.assign({}, isPictureCardOrCirle ? {} : listItemMotion), {\n    motionDeadline: 2000,\n    motionName: `${prefixCls}-${isPictureCardOrCirle ? 'animate-inline' : 'animate'}`,\n    keys: _toConsumableArray(items.map(file => ({\n      key: file.uid,\n      file\n    }))),\n    motionAppear\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listClassNames\n  }, /*#__PURE__*/React.createElement(CSSMotionList, Object.assign({}, motionConfig, {\n    component: false\n  }), _ref => {\n    let {\n      key,\n      file,\n      className: motionClassName,\n      style: motionStyle\n    } = _ref;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: key,\n      locale: locale,\n      prefixCls: prefixCls,\n      className: motionClassName,\n      style: motionStyle,\n      file: file,\n      items: items,\n      progress: progress,\n      listType: listType,\n      isImgUrl: isImgUrl,\n      showPreviewIcon: showPreviewIcon,\n      showRemoveIcon: showRemoveIcon,\n      showDownloadIcon: showDownloadIcon,\n      removeIcon: removeIcon,\n      previewIcon: previewIcon,\n      downloadIcon: downloadIcon,\n      extra: extra,\n      iconRender: internalIconRender,\n      actionIconRender: actionIconRender,\n      itemRender: itemRender,\n      onPreview: onInternalPreview,\n      onDownload: onInternalDownload,\n      onClose: onInternalClose\n    });\n  }), appendAction && /*#__PURE__*/React.createElement(CSSMotion, Object.assign({}, motionConfig, {\n    visible: appendActionVisible,\n    forceRender: true\n  }), _ref2 => {\n    let {\n      className: motionClassName,\n      style: motionStyle\n    } = _ref2;\n    return cloneElement(appendAction, oriProps => ({\n      className: classNames(oriProps.className, motionClassName),\n      style: Object.assign(Object.assign(Object.assign({}, motionStyle), {\n        // prevent the element has hover css pseudo-class that may cause animation to end prematurely.\n        pointerEvents: motionClassName ? 'none' : undefined\n      }), oriProps.style)\n    }));\n  }));\n};\n\nconst UploadList = /*#__PURE__*/React.forwardRef(InternalUploadList);\n\nif (process.env.NODE_ENV !== 'production') {\n  UploadList.displayName = 'UploadList';\n}\n\nexport default UploadList;","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/antd/es/upload/UploadList/index.js"],"names":["_toConsumableArray","React","FileTwoTone","LoadingOutlined","PaperClipOutlined","PictureTwoTone","classNames","CSSMotion","CSSMotionList","omit","useForceUpdate","initCollapseMotion","cloneElement","Button","ConfigContext","isImageUrl","previewImage","ListItem","InternalUploadList","props","ref","listType","previewFile","onPreview","onDownload","onRemove","locale","iconRender","isImgUrl","prefixCls","customizePrefixCls","items","showPreviewIcon","showRemoveIcon","showDownloadIcon","removeIcon","previewIcon","downloadIcon","extra","progress","size","showInfo","appendAction","appendActionVisible","itemRender","disabled","forceUpdate","motionAppear","setMotionAppear","useState","isPictureCardOrCirle","includes","useEffect","startsWith","forEach","file","originFileObj","File","Blob","thumbUrl","undefined","then","previewDataUrl","onInternalPreview","e","preventDefault","onInternalDownload","url","window","open","onInternalClose","internalIconRender","isLoading","status","loadingIcon","createElement","uploading","fileIcon","actionIconRender","customIcon","callback","title","acceptUploadDisabled","btnProps","type","onClick","_a","_b","isValidElement","call","className","Object","assign","icon","useImperativeHandle","handlePreview","handleDownload","getPrefixCls","useContext","rootPrefixCls","listClassNames","listItemMotion","useMemo","motionConfig","motionDeadline","motionName","keys","map","key","uid","component","_ref","motionClassName","style","motionStyle","onClose","visible","forceRender","_ref2","oriProps","pointerEvents","UploadList","forwardRef","process","env","NODE_ENV","displayName"],"mappings":"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","sourcesContent":["\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport FileTwoTone from \"@ant-design/icons/es/icons/FileTwoTone\";\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport PaperClipOutlined from \"@ant-design/icons/es/icons/PaperClipOutlined\";\nimport PictureTwoTone from \"@ant-design/icons/es/icons/PictureTwoTone\";\nimport classNames from 'classnames';\nimport CSSMotion, { CSSMotionList } from 'rc-motion';\nimport omit from \"rc-util/es/omit\";\nimport useForceUpdate from '../../_util/hooks/useForceUpdate';\nimport initCollapseMotion from '../../_util/motion';\nimport { cloneElement } from '../../_util/reactNode';\nimport Button from '../../button';\nimport { ConfigContext } from '../../config-provider';\nimport { isImageUrl, previewImage } from '../utils';\nimport ListItem from './ListItem';\nconst InternalUploadList = (props, ref) => {\n  const {\n    listType = 'text',\n    previewFile = previewImage,\n    onPreview,\n    onDownload,\n    onRemove,\n    locale,\n    iconRender,\n    isImageUrl: isImgUrl = isImageUrl,\n    prefixCls: customizePrefixCls,\n    items = [],\n    showPreviewIcon = true,\n    showRemoveIcon = true,\n    showDownloadIcon = false,\n    removeIcon,\n    previewIcon,\n    downloadIcon,\n    extra,\n    progress = {\n      size: [-1, 2],\n      showInfo: false\n    },\n    appendAction,\n    appendActionVisible = true,\n    itemRender,\n    disabled\n  } = props;\n  const forceUpdate = useForceUpdate();\n  const [motionAppear, setMotionAppear] = React.useState(false);\n  const isPictureCardOrCirle = ['picture-card', 'picture-circle'].includes(listType);\n  // ============================= Effect =============================\n  React.useEffect(() => {\n    if (!listType.startsWith('picture')) {\n      return;\n    }\n    (items || []).forEach(file => {\n      if (!(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n        return;\n      }\n      file.thumbUrl = '';\n      previewFile === null || previewFile === void 0 ? void 0 : previewFile(file.originFileObj).then(previewDataUrl => {\n        // Need append '' to avoid dead loop\n        file.thumbUrl = previewDataUrl || '';\n        forceUpdate();\n      });\n    });\n  }, [listType, items, previewFile]);\n  React.useEffect(() => {\n    setMotionAppear(true);\n  }, []);\n  // ============================= Events =============================\n  const onInternalPreview = (file, e) => {\n    if (!onPreview) {\n      return;\n    }\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    return onPreview(file);\n  };\n  const onInternalDownload = file => {\n    if (typeof onDownload === 'function') {\n      onDownload(file);\n    } else if (file.url) {\n      window.open(file.url);\n    }\n  };\n  const onInternalClose = file => {\n    onRemove === null || onRemove === void 0 ? void 0 : onRemove(file);\n  };\n  const internalIconRender = file => {\n    if (iconRender) {\n      return iconRender(file, listType);\n    }\n    const isLoading = file.status === 'uploading';\n    if (listType.startsWith('picture')) {\n      const loadingIcon = listType === 'picture' ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : locale.uploading;\n      const fileIcon = (isImgUrl === null || isImgUrl === void 0 ? void 0 : isImgUrl(file)) ? /*#__PURE__*/React.createElement(PictureTwoTone, null) : /*#__PURE__*/React.createElement(FileTwoTone, null);\n      return isLoading ? loadingIcon : fileIcon;\n    }\n    return isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : /*#__PURE__*/React.createElement(PaperClipOutlined, null);\n  };\n  const actionIconRender = (customIcon, callback, prefixCls, title, acceptUploadDisabled) => {\n    const btnProps = {\n      type: 'text',\n      size: 'small',\n      title,\n      onClick: e => {\n        var _a, _b;\n        callback();\n        if (/*#__PURE__*/React.isValidElement(customIcon)) {\n          (_b = (_a = customIcon.props).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        }\n      },\n      className: `${prefixCls}-list-item-action`,\n      disabled: acceptUploadDisabled ? disabled : false\n    };\n    return /*#__PURE__*/React.isValidElement(customIcon) ? (/*#__PURE__*/React.createElement(Button, Object.assign({}, btnProps, {\n      icon: cloneElement(customIcon, Object.assign(Object.assign({}, customIcon.props), {\n        onClick: () => {}\n      }))\n    }))) : (/*#__PURE__*/React.createElement(Button, Object.assign({}, btnProps), /*#__PURE__*/React.createElement(\"span\", null, customIcon)));\n  };\n  // ============================== Ref ===============================\n  // Test needs\n  React.useImperativeHandle(ref, () => ({\n    handlePreview: onInternalPreview,\n    handleDownload: onInternalDownload\n  }));\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  // ============================= Render =============================\n  const prefixCls = getPrefixCls('upload', customizePrefixCls);\n  const rootPrefixCls = getPrefixCls();\n  const listClassNames = classNames(`${prefixCls}-list`, `${prefixCls}-list-${listType}`);\n  const listItemMotion = React.useMemo(() => omit(initCollapseMotion(rootPrefixCls), ['onAppearEnd', 'onEnterEnd', 'onLeaveEnd']), [rootPrefixCls]);\n  const motionConfig = Object.assign(Object.assign({}, isPictureCardOrCirle ? {} : listItemMotion), {\n    motionDeadline: 2000,\n    motionName: `${prefixCls}-${isPictureCardOrCirle ? 'animate-inline' : 'animate'}`,\n    keys: _toConsumableArray(items.map(file => ({\n      key: file.uid,\n      file\n    }))),\n    motionAppear\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listClassNames\n  }, /*#__PURE__*/React.createElement(CSSMotionList, Object.assign({}, motionConfig, {\n    component: false\n  }), _ref => {\n    let {\n      key,\n      file,\n      className: motionClassName,\n      style: motionStyle\n    } = _ref;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: key,\n      locale: locale,\n      prefixCls: prefixCls,\n      className: motionClassName,\n      style: motionStyle,\n      file: file,\n      items: items,\n      progress: progress,\n      listType: listType,\n      isImgUrl: isImgUrl,\n      showPreviewIcon: showPreviewIcon,\n      showRemoveIcon: showRemoveIcon,\n      showDownloadIcon: showDownloadIcon,\n      removeIcon: removeIcon,\n      previewIcon: previewIcon,\n      downloadIcon: downloadIcon,\n      extra: extra,\n      iconRender: internalIconRender,\n      actionIconRender: actionIconRender,\n      itemRender: itemRender,\n      onPreview: onInternalPreview,\n      onDownload: onInternalDownload,\n      onClose: onInternalClose\n    });\n  }), appendAction && (/*#__PURE__*/React.createElement(CSSMotion, Object.assign({}, motionConfig, {\n    visible: appendActionVisible,\n    forceRender: true\n  }), _ref2 => {\n    let {\n      className: motionClassName,\n      style: motionStyle\n    } = _ref2;\n    return cloneElement(appendAction, oriProps => ({\n      className: classNames(oriProps.className, motionClassName),\n      style: Object.assign(Object.assign(Object.assign({}, motionStyle), {\n        // prevent the element has hover css pseudo-class that may cause animation to end prematurely.\n        pointerEvents: motionClassName ? 'none' : undefined\n      }), oriProps.style)\n    }));\n  })));\n};\nconst UploadList = /*#__PURE__*/React.forwardRef(InternalUploadList);\nif (process.env.NODE_ENV !== 'production') {\n  UploadList.displayName = 'UploadList';\n}\nexport default UploadList;"]},"metadata":{},"sourceType":"module"}