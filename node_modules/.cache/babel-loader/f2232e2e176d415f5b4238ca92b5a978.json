{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint no-console:0 */\n\nvar formatRegExp = /%[sdj%]/g;\nexport var warning = function warning() {}; // don't print warning message when in production env or node runtime\n\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warning = function warning(type, errors) {\n    if (typeof console !== 'undefined' && console.warn && typeof ASYNC_VALIDATOR_NO_WARNING === 'undefined') {\n      if (errors.every(function (e) {\n        return typeof e === 'string';\n      })) {\n        console.warn(type, errors);\n      }\n    }\n  };\n}\n\nexport function convertFieldsError(errors) {\n  if (!errors || !errors.length) return null;\n  var fields = {};\n  errors.forEach(function (error) {\n    var field = error.field;\n    fields[field] = fields[field] || [];\n    fields[field].push(error);\n  });\n  return fields;\n}\nexport function format(template) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var i = 0;\n  var len = args.length;\n\n  if (typeof template === 'function') {\n    // eslint-disable-next-line prefer-spread\n    return template.apply(null, args);\n  }\n\n  if (typeof template === 'string') {\n    var str = template.replace(formatRegExp, function (x) {\n      if (x === '%%') {\n        return '%';\n      }\n\n      if (i >= len) {\n        return x;\n      }\n\n      switch (x) {\n        case '%s':\n          return String(args[i++]);\n\n        case '%d':\n          return Number(args[i++]);\n\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n\n          break;\n\n        default:\n          return x;\n      }\n    });\n    return str;\n  }\n\n  return template;\n}\n\nfunction isNativeStringType(type) {\n  return type === 'string' || type === 'url' || type === 'hex' || type === 'email' || type === 'date' || type === 'pattern';\n}\n\nexport function isEmptyValue(value, type) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n\n  if (type === 'array' && Array.isArray(value) && !value.length) {\n    return true;\n  }\n\n  if (isNativeStringType(type) && typeof value === 'string' && !value) {\n    return true;\n  }\n\n  return false;\n}\nexport function isEmptyObject(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nfunction asyncParallelArray(arr, func, callback) {\n  var results = [];\n  var total = 0;\n  var arrLength = arr.length;\n\n  function count(errors) {\n    results.push.apply(results, _toConsumableArray(errors || []));\n    total++;\n\n    if (total === arrLength) {\n      callback(results);\n    }\n  }\n\n  arr.forEach(function (a) {\n    func(a, count);\n  });\n}\n\nfunction asyncSerialArray(arr, func, callback) {\n  var index = 0;\n  var arrLength = arr.length;\n\n  function next(errors) {\n    if (errors && errors.length) {\n      callback(errors);\n      return;\n    }\n\n    var original = index;\n    index = index + 1;\n\n    if (original < arrLength) {\n      func(arr[original], next);\n    } else {\n      callback([]);\n    }\n  }\n\n  next([]);\n}\n\nfunction flattenObjArr(objArr) {\n  var ret = [];\n  Object.keys(objArr).forEach(function (k) {\n    ret.push.apply(ret, _toConsumableArray(objArr[k] || []));\n  });\n  return ret;\n}\n\nexport var AsyncValidationError = /*#__PURE__*/function (_Error) {\n  _inherits(AsyncValidationError, _Error);\n\n  var _super = _createSuper(AsyncValidationError);\n\n  function AsyncValidationError(errors, fields) {\n    var _this;\n\n    _classCallCheck(this, AsyncValidationError);\n\n    _this = _super.call(this, 'Async Validation Error');\n\n    _defineProperty(_assertThisInitialized(_this), \"errors\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"fields\", void 0);\n\n    _this.errors = errors;\n    _this.fields = fields;\n    return _this;\n  }\n\n  return _createClass(AsyncValidationError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport function asyncMap(objArr, option, func, callback, source) {\n  if (option.first) {\n    var _pending = new Promise(function (resolve, reject) {\n      var next = function next(errors) {\n        callback(errors);\n        return errors.length ? reject(new AsyncValidationError(errors, convertFieldsError(errors))) : resolve(source);\n      };\n\n      var flattenArr = flattenObjArr(objArr);\n      asyncSerialArray(flattenArr, func, next);\n    });\n\n    _pending.catch(function (e) {\n      return e;\n    });\n\n    return _pending;\n  }\n\n  var firstFields = option.firstFields === true ? Object.keys(objArr) : option.firstFields || [];\n  var objArrKeys = Object.keys(objArr);\n  var objArrLength = objArrKeys.length;\n  var total = 0;\n  var results = [];\n  var pending = new Promise(function (resolve, reject) {\n    var next = function next(errors) {\n      // eslint-disable-next-line prefer-spread\n      results.push.apply(results, errors);\n      total++;\n\n      if (total === objArrLength) {\n        callback(results);\n        return results.length ? reject(new AsyncValidationError(results, convertFieldsError(results))) : resolve(source);\n      }\n    };\n\n    if (!objArrKeys.length) {\n      callback(results);\n      resolve(source);\n    }\n\n    objArrKeys.forEach(function (key) {\n      var arr = objArr[key];\n\n      if (firstFields.indexOf(key) !== -1) {\n        asyncSerialArray(arr, func, next);\n      } else {\n        asyncParallelArray(arr, func, next);\n      }\n    });\n  });\n  pending.catch(function (e) {\n    return e;\n  });\n  return pending;\n}\n\nfunction isErrorObj(obj) {\n  return !!(obj && obj.message !== undefined);\n}\n\nfunction getValue(value, path) {\n  var v = value;\n\n  for (var i = 0; i < path.length; i++) {\n    if (v == undefined) {\n      return v;\n    }\n\n    v = v[path[i]];\n  }\n\n  return v;\n}\n\nexport function complementError(rule, source) {\n  return function (oe) {\n    var fieldValue;\n\n    if (rule.fullFields) {\n      fieldValue = getValue(source, rule.fullFields);\n    } else {\n      fieldValue = source[oe.field || rule.fullField];\n    }\n\n    if (isErrorObj(oe)) {\n      oe.field = oe.field || rule.fullField;\n      oe.fieldValue = fieldValue;\n      return oe;\n    }\n\n    return {\n      message: typeof oe === 'function' ? oe() : oe,\n      fieldValue: fieldValue,\n      field: oe.field || rule.fullField\n    };\n  };\n}\nexport function deepMerge(target, source) {\n  if (source) {\n    for (var s in source) {\n      if (source.hasOwnProperty(s)) {\n        var value = source[s];\n\n        if (_typeof(value) === 'object' && _typeof(target[s]) === 'object') {\n          target[s] = _objectSpread(_objectSpread({}, target[s]), value);\n        } else {\n          target[s] = value;\n        }\n      }\n    }\n  }\n\n  return target;\n}","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/@rc-component/async-validator/es/util.js"],"names":["_objectSpread","_typeof","_createClass","_classCallCheck","_assertThisInitialized","_inherits","_createSuper","_wrapNativeSuper","_defineProperty","_toConsumableArray","formatRegExp","warning","process","env","NODE_ENV","window","document","type","errors","console","warn","ASYNC_VALIDATOR_NO_WARNING","every","e","convertFieldsError","length","fields","forEach","error","field","push","format","template","_len","arguments","args","Array","_key","i","len","apply","str","replace","x","String","Number","JSON","stringify","_","isNativeStringType","isEmptyValue","value","undefined","isArray","isEmptyObject","obj","Object","keys","asyncParallelArray","arr","func","callback","results","total","arrLength","count","a","asyncSerialArray","index","next","original","flattenObjArr","objArr","ret","k","AsyncValidationError","_Error","_super","_this","call","Error","asyncMap","option","source","first","_pending","Promise","resolve","reject","flattenArr","catch","firstFields","objArrKeys","objArrLength","pending","key","indexOf","isErrorObj","message","getValue","path","v","complementError","rule","oe","fieldValue","fullFields","fullField","deepMerge","target","s","hasOwnProperty"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint no-console:0 */\n\nvar formatRegExp = /%[sdj%]/g;\nexport var warning = function warning() {};\n\n// don't print warning message when in production env or node runtime\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warning = function warning(type, errors) {\n    if (typeof console !== 'undefined' && console.warn && typeof ASYNC_VALIDATOR_NO_WARNING === 'undefined') {\n      if (errors.every(function (e) {\n        return typeof e === 'string';\n      })) {\n        console.warn(type, errors);\n      }\n    }\n  };\n}\nexport function convertFieldsError(errors) {\n  if (!errors || !errors.length) return null;\n  var fields = {};\n  errors.forEach(function (error) {\n    var field = error.field;\n    fields[field] = fields[field] || [];\n    fields[field].push(error);\n  });\n  return fields;\n}\nexport function format(template) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  var i = 0;\n  var len = args.length;\n  if (typeof template === 'function') {\n    // eslint-disable-next-line prefer-spread\n    return template.apply(null, args);\n  }\n  if (typeof template === 'string') {\n    var str = template.replace(formatRegExp, function (x) {\n      if (x === '%%') {\n        return '%';\n      }\n      if (i >= len) {\n        return x;\n      }\n      switch (x) {\n        case '%s':\n          return String(args[i++]);\n        case '%d':\n          return Number(args[i++]);\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n          break;\n        default:\n          return x;\n      }\n    });\n    return str;\n  }\n  return template;\n}\nfunction isNativeStringType(type) {\n  return type === 'string' || type === 'url' || type === 'hex' || type === 'email' || type === 'date' || type === 'pattern';\n}\nexport function isEmptyValue(value, type) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n  if (type === 'array' && Array.isArray(value) && !value.length) {\n    return true;\n  }\n  if (isNativeStringType(type) && typeof value === 'string' && !value) {\n    return true;\n  }\n  return false;\n}\nexport function isEmptyObject(obj) {\n  return Object.keys(obj).length === 0;\n}\nfunction asyncParallelArray(arr, func, callback) {\n  var results = [];\n  var total = 0;\n  var arrLength = arr.length;\n  function count(errors) {\n    results.push.apply(results, _toConsumableArray(errors || []));\n    total++;\n    if (total === arrLength) {\n      callback(results);\n    }\n  }\n  arr.forEach(function (a) {\n    func(a, count);\n  });\n}\nfunction asyncSerialArray(arr, func, callback) {\n  var index = 0;\n  var arrLength = arr.length;\n  function next(errors) {\n    if (errors && errors.length) {\n      callback(errors);\n      return;\n    }\n    var original = index;\n    index = index + 1;\n    if (original < arrLength) {\n      func(arr[original], next);\n    } else {\n      callback([]);\n    }\n  }\n  next([]);\n}\nfunction flattenObjArr(objArr) {\n  var ret = [];\n  Object.keys(objArr).forEach(function (k) {\n    ret.push.apply(ret, _toConsumableArray(objArr[k] || []));\n  });\n  return ret;\n}\nexport var AsyncValidationError = /*#__PURE__*/function (_Error) {\n  _inherits(AsyncValidationError, _Error);\n  var _super = _createSuper(AsyncValidationError);\n  function AsyncValidationError(errors, fields) {\n    var _this;\n    _classCallCheck(this, AsyncValidationError);\n    _this = _super.call(this, 'Async Validation Error');\n    _defineProperty(_assertThisInitialized(_this), \"errors\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"fields\", void 0);\n    _this.errors = errors;\n    _this.fields = fields;\n    return _this;\n  }\n  return _createClass(AsyncValidationError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport function asyncMap(objArr, option, func, callback, source) {\n  if (option.first) {\n    var _pending = new Promise(function (resolve, reject) {\n      var next = function next(errors) {\n        callback(errors);\n        return errors.length ? reject(new AsyncValidationError(errors, convertFieldsError(errors))) : resolve(source);\n      };\n      var flattenArr = flattenObjArr(objArr);\n      asyncSerialArray(flattenArr, func, next);\n    });\n    _pending.catch(function (e) {\n      return e;\n    });\n    return _pending;\n  }\n  var firstFields = option.firstFields === true ? Object.keys(objArr) : option.firstFields || [];\n  var objArrKeys = Object.keys(objArr);\n  var objArrLength = objArrKeys.length;\n  var total = 0;\n  var results = [];\n  var pending = new Promise(function (resolve, reject) {\n    var next = function next(errors) {\n      // eslint-disable-next-line prefer-spread\n      results.push.apply(results, errors);\n      total++;\n      if (total === objArrLength) {\n        callback(results);\n        return results.length ? reject(new AsyncValidationError(results, convertFieldsError(results))) : resolve(source);\n      }\n    };\n    if (!objArrKeys.length) {\n      callback(results);\n      resolve(source);\n    }\n    objArrKeys.forEach(function (key) {\n      var arr = objArr[key];\n      if (firstFields.indexOf(key) !== -1) {\n        asyncSerialArray(arr, func, next);\n      } else {\n        asyncParallelArray(arr, func, next);\n      }\n    });\n  });\n  pending.catch(function (e) {\n    return e;\n  });\n  return pending;\n}\nfunction isErrorObj(obj) {\n  return !!(obj && obj.message !== undefined);\n}\nfunction getValue(value, path) {\n  var v = value;\n  for (var i = 0; i < path.length; i++) {\n    if (v == undefined) {\n      return v;\n    }\n    v = v[path[i]];\n  }\n  return v;\n}\nexport function complementError(rule, source) {\n  return function (oe) {\n    var fieldValue;\n    if (rule.fullFields) {\n      fieldValue = getValue(source, rule.fullFields);\n    } else {\n      fieldValue = source[oe.field || rule.fullField];\n    }\n    if (isErrorObj(oe)) {\n      oe.field = oe.field || rule.fullField;\n      oe.fieldValue = fieldValue;\n      return oe;\n    }\n    return {\n      message: typeof oe === 'function' ? oe() : oe,\n      fieldValue: fieldValue,\n      field: oe.field || rule.fullField\n    };\n  };\n}\nexport function deepMerge(target, source) {\n  if (source) {\n    for (var s in source) {\n      if (source.hasOwnProperty(s)) {\n        var value = source[s];\n        if (_typeof(value) === 'object' && _typeof(target[s]) === 'object') {\n          target[s] = _objectSpread(_objectSpread({}, target[s]), value);\n        } else {\n          target[s] = value;\n        }\n      }\n    }\n  }\n  return target;\n}"]},"metadata":{},"sourceType":"module"}