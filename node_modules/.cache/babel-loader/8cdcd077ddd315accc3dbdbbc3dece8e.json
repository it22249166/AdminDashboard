{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport * as React from 'react';\nimport { toArray } from \"../../utils/miscUtil\";\nimport PickerContext from \"../context\";\nimport Footer from \"./Footer\";\nimport PopupPanel from \"./PopupPanel\";\nimport PresetPanel from \"./PresetPanel\";\nexport default function Popup(props) {\n  var panelRender = props.panelRender,\n      internalMode = props.internalMode,\n      picker = props.picker,\n      showNow = props.showNow,\n      range = props.range,\n      multiple = props.multiple,\n      _props$activeInfo = props.activeInfo,\n      activeInfo = _props$activeInfo === void 0 ? [0, 0, 0] : _props$activeInfo,\n      presets = props.presets,\n      onPresetHover = props.onPresetHover,\n      onPresetSubmit = props.onPresetSubmit,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onPanelMouseDown = props.onPanelMouseDown,\n      direction = props.direction,\n      value = props.value,\n      onSelect = props.onSelect,\n      isInvalid = props.isInvalid,\n      defaultOpenValue = props.defaultOpenValue,\n      onOk = props.onOk,\n      onSubmit = props.onSubmit;\n\n  var _React$useContext = React.useContext(PickerContext),\n      prefixCls = _React$useContext.prefixCls;\n\n  var panelPrefixCls = \"\".concat(prefixCls, \"-panel\");\n  var rtl = direction === 'rtl'; // ========================= Refs =========================\n\n  var arrowRef = React.useRef(null);\n  var wrapperRef = React.useRef(null); // ======================== Offset ========================\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      containerWidth = _React$useState2[0],\n      setContainerWidth = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      containerOffset = _React$useState4[0],\n      setContainerOffset = _React$useState4[1];\n\n  var _React$useState5 = React.useState(0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      arrowOffset = _React$useState6[0],\n      setArrowOffset = _React$useState6[1];\n\n  var onResize = function onResize(info) {\n    if (info.width) {\n      setContainerWidth(info.width);\n    }\n  };\n\n  var _activeInfo = _slicedToArray(activeInfo, 3),\n      activeInputLeft = _activeInfo[0],\n      activeInputRight = _activeInfo[1],\n      selectorWidth = _activeInfo[2];\n\n  var _React$useState7 = React.useState(0),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      retryTimes = _React$useState8[0],\n      setRetryTimes = _React$useState8[1];\n\n  React.useEffect(function () {\n    setRetryTimes(10);\n  }, [activeInputLeft]);\n  React.useEffect(function () {\n    // `activeOffset` is always align with the active input element\n    // So we need only check container contains the `activeOffset`\n    if (range && wrapperRef.current) {\n      var _arrowRef$current; // Offset in case container has border radius\n\n\n      var arrowWidth = ((_arrowRef$current = arrowRef.current) === null || _arrowRef$current === void 0 ? void 0 : _arrowRef$current.offsetWidth) || 0; // Arrow Offset\n\n      var wrapperRect = wrapperRef.current.getBoundingClientRect();\n\n      if (!wrapperRect.height || wrapperRect.right < 0) {\n        setRetryTimes(function (times) {\n          return Math.max(0, times - 1);\n        });\n        return;\n      }\n\n      var nextArrowOffset = (rtl ? activeInputRight - arrowWidth : activeInputLeft) - wrapperRect.left;\n      setArrowOffset(nextArrowOffset); // Container Offset\n\n      if (containerWidth && containerWidth < selectorWidth) {\n        var offset = rtl ? wrapperRect.right - (activeInputRight - arrowWidth + containerWidth) : activeInputLeft + arrowWidth - wrapperRect.left - containerWidth;\n        var safeOffset = Math.max(0, offset);\n        setContainerOffset(safeOffset);\n      } else {\n        setContainerOffset(0);\n      }\n    }\n  }, [retryTimes, rtl, containerWidth, activeInputLeft, activeInputRight, selectorWidth, range]); // ======================== Custom ========================\n\n  function filterEmpty(list) {\n    return list.filter(function (item) {\n      return item;\n    });\n  }\n\n  var valueList = React.useMemo(function () {\n    return filterEmpty(toArray(value));\n  }, [value]);\n  var isTimePickerEmptyValue = picker === 'time' && !valueList.length;\n  var footerSubmitValue = React.useMemo(function () {\n    if (isTimePickerEmptyValue) {\n      return filterEmpty([defaultOpenValue]);\n    }\n\n    return valueList;\n  }, [isTimePickerEmptyValue, valueList, defaultOpenValue]);\n  var popupPanelValue = isTimePickerEmptyValue ? defaultOpenValue : valueList;\n  var disableSubmit = React.useMemo(function () {\n    // Empty is invalid\n    if (!footerSubmitValue.length) {\n      return true;\n    }\n\n    return footerSubmitValue.some(function (val) {\n      return isInvalid(val);\n    });\n  }, [footerSubmitValue, isInvalid]);\n\n  var onFooterSubmit = function onFooterSubmit() {\n    // For TimePicker, we will additional trigger the value update\n    if (isTimePickerEmptyValue) {\n      onSelect(defaultOpenValue);\n    }\n\n    onOk();\n    onSubmit();\n  };\n\n  var mergedNodes = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-panel-layout\")\n  }, /*#__PURE__*/React.createElement(PresetPanel, {\n    prefixCls: prefixCls,\n    presets: presets,\n    onClick: onPresetSubmit,\n    onHover: onPresetHover\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PopupPanel, _extends({}, props, {\n    value: popupPanelValue\n  })), /*#__PURE__*/React.createElement(Footer, _extends({}, props, {\n    showNow: multiple ? false : showNow,\n    invalid: disableSubmit,\n    onSubmit: onFooterSubmit\n  }))));\n\n  if (panelRender) {\n    mergedNodes = panelRender(mergedNodes);\n  } // ======================== Render ========================\n\n\n  var containerPrefixCls = \"\".concat(panelPrefixCls, \"-container\");\n  var marginLeft = 'marginLeft';\n  var marginRight = 'marginRight'; // Container\n\n  var renderNode = /*#__PURE__*/React.createElement(\"div\", {\n    onMouseDown: onPanelMouseDown,\n    tabIndex: -1,\n    className: classNames(containerPrefixCls, // Used for Today Button style, safe to remove if no need\n    \"\".concat(prefixCls, \"-\").concat(internalMode, \"-panel-container\")),\n    style: _defineProperty(_defineProperty({}, rtl ? marginRight : marginLeft, containerOffset), rtl ? marginLeft : marginRight, 'auto') // Still wish not to lose focus on mouse down\n    // onMouseDown={(e) => {\n    //   // e.preventDefault();\n    // }}\n    ,\n    onFocus: onFocus,\n    onBlur: onBlur\n  }, mergedNodes);\n\n  if (range) {\n    renderNode = /*#__PURE__*/React.createElement(\"div\", {\n      onMouseDown: onPanelMouseDown,\n      ref: wrapperRef,\n      className: classNames(\"\".concat(prefixCls, \"-range-wrapper\"), \"\".concat(prefixCls, \"-\").concat(picker, \"-range-wrapper\"))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: arrowRef,\n      className: \"\".concat(prefixCls, \"-range-arrow\"),\n      style: {\n        left: arrowOffset\n      }\n    }), /*#__PURE__*/React.createElement(ResizeObserver, {\n      onResize: onResize\n    }, renderNode));\n  }\n\n  return renderNode;\n}","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-picker/es/PickerInput/Popup/index.js"],"names":["_defineProperty","_extends","_slicedToArray","classNames","ResizeObserver","React","toArray","PickerContext","Footer","PopupPanel","PresetPanel","Popup","props","panelRender","internalMode","picker","showNow","range","multiple","_props$activeInfo","activeInfo","presets","onPresetHover","onPresetSubmit","onFocus","onBlur","onPanelMouseDown","direction","value","onSelect","isInvalid","defaultOpenValue","onOk","onSubmit","_React$useContext","useContext","prefixCls","panelPrefixCls","concat","rtl","arrowRef","useRef","wrapperRef","_React$useState","useState","_React$useState2","containerWidth","setContainerWidth","_React$useState3","_React$useState4","containerOffset","setContainerOffset","_React$useState5","_React$useState6","arrowOffset","setArrowOffset","onResize","info","width","_activeInfo","activeInputLeft","activeInputRight","selectorWidth","_React$useState7","_React$useState8","retryTimes","setRetryTimes","useEffect","current","_arrowRef$current","arrowWidth","offsetWidth","wrapperRect","getBoundingClientRect","height","right","times","Math","max","nextArrowOffset","left","offset","safeOffset","filterEmpty","list","filter","item","valueList","useMemo","isTimePickerEmptyValue","length","footerSubmitValue","popupPanelValue","disableSubmit","some","val","onFooterSubmit","mergedNodes","createElement","className","onClick","onHover","invalid","containerPrefixCls","marginLeft","marginRight","renderNode","onMouseDown","tabIndex","style","ref"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,2CAA5B;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,OAAOC,aAAP,MAA0B,YAA1B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,eAAe,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACnC,MAAIC,WAAW,GAAGD,KAAK,CAACC,WAAxB;AAAA,MACEC,YAAY,GAAGF,KAAK,CAACE,YADvB;AAAA,MAEEC,MAAM,GAAGH,KAAK,CAACG,MAFjB;AAAA,MAGEC,OAAO,GAAGJ,KAAK,CAACI,OAHlB;AAAA,MAIEC,KAAK,GAAGL,KAAK,CAACK,KAJhB;AAAA,MAKEC,QAAQ,GAAGN,KAAK,CAACM,QALnB;AAAA,MAMEC,iBAAiB,GAAGP,KAAK,CAACQ,UAN5B;AAAA,MAOEA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA/B,GAA2CA,iBAP1D;AAAA,MAQEE,OAAO,GAAGT,KAAK,CAACS,OARlB;AAAA,MASEC,aAAa,GAAGV,KAAK,CAACU,aATxB;AAAA,MAUEC,cAAc,GAAGX,KAAK,CAACW,cAVzB;AAAA,MAWEC,OAAO,GAAGZ,KAAK,CAACY,OAXlB;AAAA,MAYEC,MAAM,GAAGb,KAAK,CAACa,MAZjB;AAAA,MAaEC,gBAAgB,GAAGd,KAAK,CAACc,gBAb3B;AAAA,MAcEC,SAAS,GAAGf,KAAK,CAACe,SAdpB;AAAA,MAeEC,KAAK,GAAGhB,KAAK,CAACgB,KAfhB;AAAA,MAgBEC,QAAQ,GAAGjB,KAAK,CAACiB,QAhBnB;AAAA,MAiBEC,SAAS,GAAGlB,KAAK,CAACkB,SAjBpB;AAAA,MAkBEC,gBAAgB,GAAGnB,KAAK,CAACmB,gBAlB3B;AAAA,MAmBEC,IAAI,GAAGpB,KAAK,CAACoB,IAnBf;AAAA,MAoBEC,QAAQ,GAAGrB,KAAK,CAACqB,QApBnB;;AAqBA,MAAIC,iBAAiB,GAAG7B,KAAK,CAAC8B,UAAN,CAAiB5B,aAAjB,CAAxB;AAAA,MACE6B,SAAS,GAAGF,iBAAiB,CAACE,SADhC;;AAEA,MAAIC,cAAc,GAAG,GAAGC,MAAH,CAAUF,SAAV,EAAqB,QAArB,CAArB;AACA,MAAIG,GAAG,GAAGZ,SAAS,KAAK,KAAxB,CAzBmC,CA2BnC;;AACA,MAAIa,QAAQ,GAAGnC,KAAK,CAACoC,MAAN,CAAa,IAAb,CAAf;AACA,MAAIC,UAAU,GAAGrC,KAAK,CAACoC,MAAN,CAAa,IAAb,CAAjB,CA7BmC,CA+BnC;;AACA,MAAIE,eAAe,GAAGtC,KAAK,CAACuC,QAAN,CAAe,CAAf,CAAtB;AAAA,MACEC,gBAAgB,GAAG3C,cAAc,CAACyC,eAAD,EAAkB,CAAlB,CADnC;AAAA,MAEEG,cAAc,GAAGD,gBAAgB,CAAC,CAAD,CAFnC;AAAA,MAGEE,iBAAiB,GAAGF,gBAAgB,CAAC,CAAD,CAHtC;;AAIA,MAAIG,gBAAgB,GAAG3C,KAAK,CAACuC,QAAN,CAAe,CAAf,CAAvB;AAAA,MACEK,gBAAgB,GAAG/C,cAAc,CAAC8C,gBAAD,EAAmB,CAAnB,CADnC;AAAA,MAEEE,eAAe,GAAGD,gBAAgB,CAAC,CAAD,CAFpC;AAAA,MAGEE,kBAAkB,GAAGF,gBAAgB,CAAC,CAAD,CAHvC;;AAIA,MAAIG,gBAAgB,GAAG/C,KAAK,CAACuC,QAAN,CAAe,CAAf,CAAvB;AAAA,MACES,gBAAgB,GAAGnD,cAAc,CAACkD,gBAAD,EAAmB,CAAnB,CADnC;AAAA,MAEEE,WAAW,GAAGD,gBAAgB,CAAC,CAAD,CAFhC;AAAA,MAGEE,cAAc,GAAGF,gBAAgB,CAAC,CAAD,CAHnC;;AAIA,MAAIG,QAAQ,GAAG,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACrC,QAAIA,IAAI,CAACC,KAAT,EAAgB;AACdX,MAAAA,iBAAiB,CAACU,IAAI,CAACC,KAAN,CAAjB;AACD;AACF,GAJD;;AAKA,MAAIC,WAAW,GAAGzD,cAAc,CAACkB,UAAD,EAAa,CAAb,CAAhC;AAAA,MACEwC,eAAe,GAAGD,WAAW,CAAC,CAAD,CAD/B;AAAA,MAEEE,gBAAgB,GAAGF,WAAW,CAAC,CAAD,CAFhC;AAAA,MAGEG,aAAa,GAAGH,WAAW,CAAC,CAAD,CAH7B;;AAIA,MAAII,gBAAgB,GAAG1D,KAAK,CAACuC,QAAN,CAAe,CAAf,CAAvB;AAAA,MACEoB,gBAAgB,GAAG9D,cAAc,CAAC6D,gBAAD,EAAmB,CAAnB,CADnC;AAAA,MAEEE,UAAU,GAAGD,gBAAgB,CAAC,CAAD,CAF/B;AAAA,MAGEE,aAAa,GAAGF,gBAAgB,CAAC,CAAD,CAHlC;;AAIA3D,EAAAA,KAAK,CAAC8D,SAAN,CAAgB,YAAY;AAC1BD,IAAAA,aAAa,CAAC,EAAD,CAAb;AACD,GAFD,EAEG,CAACN,eAAD,CAFH;AAGAvD,EAAAA,KAAK,CAAC8D,SAAN,CAAgB,YAAY;AAC1B;AACA;AACA,QAAIlD,KAAK,IAAIyB,UAAU,CAAC0B,OAAxB,EAAiC;AAC/B,UAAIC,iBAAJ,CAD+B,CAE/B;;;AACA,UAAIC,UAAU,GAAG,CAAC,CAACD,iBAAiB,GAAG7B,QAAQ,CAAC4B,OAA9B,MAA2C,IAA3C,IAAmDC,iBAAiB,KAAK,KAAK,CAA9E,GAAkF,KAAK,CAAvF,GAA2FA,iBAAiB,CAACE,WAA9G,KAA8H,CAA/I,CAH+B,CAK/B;;AACA,UAAIC,WAAW,GAAG9B,UAAU,CAAC0B,OAAX,CAAmBK,qBAAnB,EAAlB;;AACA,UAAI,CAACD,WAAW,CAACE,MAAb,IAAuBF,WAAW,CAACG,KAAZ,GAAoB,CAA/C,EAAkD;AAChDT,QAAAA,aAAa,CAAC,UAAUU,KAAV,EAAiB;AAC7B,iBAAOC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYF,KAAK,GAAG,CAApB,CAAP;AACD,SAFY,CAAb;AAGA;AACD;;AACD,UAAIG,eAAe,GAAG,CAACxC,GAAG,GAAGsB,gBAAgB,GAAGS,UAAtB,GAAmCV,eAAvC,IAA0DY,WAAW,CAACQ,IAA5F;AACAzB,MAAAA,cAAc,CAACwB,eAAD,CAAd,CAd+B,CAgB/B;;AACA,UAAIjC,cAAc,IAAIA,cAAc,GAAGgB,aAAvC,EAAsD;AACpD,YAAImB,MAAM,GAAG1C,GAAG,GAAGiC,WAAW,CAACG,KAAZ,IAAqBd,gBAAgB,GAAGS,UAAnB,GAAgCxB,cAArD,CAAH,GAA0Ec,eAAe,GAAGU,UAAlB,GAA+BE,WAAW,CAACQ,IAA3C,GAAkDlC,cAA5I;AACA,YAAIoC,UAAU,GAAGL,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYG,MAAZ,CAAjB;AACA9B,QAAAA,kBAAkB,CAAC+B,UAAD,CAAlB;AACD,OAJD,MAIO;AACL/B,QAAAA,kBAAkB,CAAC,CAAD,CAAlB;AACD;AACF;AACF,GA5BD,EA4BG,CAACc,UAAD,EAAa1B,GAAb,EAAkBO,cAAlB,EAAkCc,eAAlC,EAAmDC,gBAAnD,EAAqEC,aAArE,EAAoF7C,KAApF,CA5BH,EA5DmC,CA0FnC;;AACA,WAASkE,WAAT,CAAqBC,IAArB,EAA2B;AACzB,WAAOA,IAAI,CAACC,MAAL,CAAY,UAAUC,IAAV,EAAgB;AACjC,aAAOA,IAAP;AACD,KAFM,CAAP;AAGD;;AACD,MAAIC,SAAS,GAAGlF,KAAK,CAACmF,OAAN,CAAc,YAAY;AACxC,WAAOL,WAAW,CAAC7E,OAAO,CAACsB,KAAD,CAAR,CAAlB;AACD,GAFe,EAEb,CAACA,KAAD,CAFa,CAAhB;AAGA,MAAI6D,sBAAsB,GAAG1E,MAAM,KAAK,MAAX,IAAqB,CAACwE,SAAS,CAACG,MAA7D;AACA,MAAIC,iBAAiB,GAAGtF,KAAK,CAACmF,OAAN,CAAc,YAAY;AAChD,QAAIC,sBAAJ,EAA4B;AAC1B,aAAON,WAAW,CAAC,CAACpD,gBAAD,CAAD,CAAlB;AACD;;AACD,WAAOwD,SAAP;AACD,GALuB,EAKrB,CAACE,sBAAD,EAAyBF,SAAzB,EAAoCxD,gBAApC,CALqB,CAAxB;AAMA,MAAI6D,eAAe,GAAGH,sBAAsB,GAAG1D,gBAAH,GAAsBwD,SAAlE;AACA,MAAIM,aAAa,GAAGxF,KAAK,CAACmF,OAAN,CAAc,YAAY;AAC5C;AACA,QAAI,CAACG,iBAAiB,CAACD,MAAvB,EAA+B;AAC7B,aAAO,IAAP;AACD;;AACD,WAAOC,iBAAiB,CAACG,IAAlB,CAAuB,UAAUC,GAAV,EAAe;AAC3C,aAAOjE,SAAS,CAACiE,GAAD,CAAhB;AACD,KAFM,CAAP;AAGD,GARmB,EAQjB,CAACJ,iBAAD,EAAoB7D,SAApB,CARiB,CAApB;;AASA,MAAIkE,cAAc,GAAG,SAASA,cAAT,GAA0B;AAC7C;AACA,QAAIP,sBAAJ,EAA4B;AAC1B5D,MAAAA,QAAQ,CAACE,gBAAD,CAAR;AACD;;AACDC,IAAAA,IAAI;AACJC,IAAAA,QAAQ;AACT,GAPD;;AAQA,MAAIgE,WAAW,GAAG,aAAa5F,KAAK,CAAC6F,aAAN,CAAoB,KAApB,EAA2B;AACxDC,IAAAA,SAAS,EAAE,GAAG7D,MAAH,CAAUF,SAAV,EAAqB,eAArB;AAD6C,GAA3B,EAE5B,aAAa/B,KAAK,CAAC6F,aAAN,CAAoBxF,WAApB,EAAiC;AAC/C0B,IAAAA,SAAS,EAAEA,SADoC;AAE/Cf,IAAAA,OAAO,EAAEA,OAFsC;AAG/C+E,IAAAA,OAAO,EAAE7E,cAHsC;AAI/C8E,IAAAA,OAAO,EAAE/E;AAJsC,GAAjC,CAFe,EAO3B,aAAajB,KAAK,CAAC6F,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,aAAa7F,KAAK,CAAC6F,aAAN,CAAoBzF,UAApB,EAAgCR,QAAQ,CAAC,EAAD,EAAKW,KAAL,EAAY;AACjHgB,IAAAA,KAAK,EAAEgE;AAD0G,GAAZ,CAAxC,CAA9C,EAEZ,aAAavF,KAAK,CAAC6F,aAAN,CAAoB1F,MAApB,EAA4BP,QAAQ,CAAC,EAAD,EAAKW,KAAL,EAAY;AAChEI,IAAAA,OAAO,EAAEE,QAAQ,GAAG,KAAH,GAAWF,OADoC;AAEhEsF,IAAAA,OAAO,EAAET,aAFuD;AAGhE5D,IAAAA,QAAQ,EAAE+D;AAHsD,GAAZ,CAApC,CAFD,CAPc,CAA/B;;AAcA,MAAInF,WAAJ,EAAiB;AACfoF,IAAAA,WAAW,GAAGpF,WAAW,CAACoF,WAAD,CAAzB;AACD,GA5IkC,CA8InC;;;AACA,MAAIM,kBAAkB,GAAG,GAAGjE,MAAH,CAAUD,cAAV,EAA0B,YAA1B,CAAzB;AACA,MAAImE,UAAU,GAAG,YAAjB;AACA,MAAIC,WAAW,GAAG,aAAlB,CAjJmC,CAmJnC;;AACA,MAAIC,UAAU,GAAG,aAAarG,KAAK,CAAC6F,aAAN,CAAoB,KAApB,EAA2B;AACvDS,IAAAA,WAAW,EAAEjF,gBAD0C;AAEvDkF,IAAAA,QAAQ,EAAE,CAAC,CAF4C;AAGvDT,IAAAA,SAAS,EAAEhG,UAAU,CAACoG,kBAAD,EAAqB;AAC1C,OAAGjE,MAAH,CAAUF,SAAV,EAAqB,GAArB,EAA0BE,MAA1B,CAAiCxB,YAAjC,EAA+C,kBAA/C,CADqB,CAHkC;AAKvD+F,IAAAA,KAAK,EAAE7G,eAAe,CAACA,eAAe,CAAC,EAAD,EAAKuC,GAAG,GAAGkE,WAAH,GAAiBD,UAAzB,EAAqCtD,eAArC,CAAhB,EAAuEX,GAAG,GAAGiE,UAAH,GAAgBC,WAA1F,EAAuG,MAAvG,CALiC,CAMvD;AACA;AACA;AACA;AATuD;AAWvDjF,IAAAA,OAAO,EAAEA,OAX8C;AAYvDC,IAAAA,MAAM,EAAEA;AAZ+C,GAA3B,EAa3BwE,WAb2B,CAA9B;;AAcA,MAAIhF,KAAJ,EAAW;AACTyF,IAAAA,UAAU,GAAG,aAAarG,KAAK,CAAC6F,aAAN,CAAoB,KAApB,EAA2B;AACnDS,MAAAA,WAAW,EAAEjF,gBADsC;AAEnDoF,MAAAA,GAAG,EAAEpE,UAF8C;AAGnDyD,MAAAA,SAAS,EAAEhG,UAAU,CAAC,GAAGmC,MAAH,CAAUF,SAAV,EAAqB,gBAArB,CAAD,EAAyC,GAAGE,MAAH,CAAUF,SAAV,EAAqB,GAArB,EAA0BE,MAA1B,CAAiCvB,MAAjC,EAAyC,gBAAzC,CAAzC;AAH8B,KAA3B,EAIvB,aAAaV,KAAK,CAAC6F,aAAN,CAAoB,KAApB,EAA2B;AACzCY,MAAAA,GAAG,EAAEtE,QADoC;AAEzC2D,MAAAA,SAAS,EAAE,GAAG7D,MAAH,CAAUF,SAAV,EAAqB,cAArB,CAF8B;AAGzCyE,MAAAA,KAAK,EAAE;AACL7B,QAAAA,IAAI,EAAE1B;AADD;AAHkC,KAA3B,CAJU,EAUtB,aAAajD,KAAK,CAAC6F,aAAN,CAAoB9F,cAApB,EAAoC;AACnDoD,MAAAA,QAAQ,EAAEA;AADyC,KAApC,EAEdkD,UAFc,CAVS,CAA1B;AAaD;;AACD,SAAOA,UAAP;AACD","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport * as React from 'react';\nimport { toArray } from \"../../utils/miscUtil\";\nimport PickerContext from \"../context\";\nimport Footer from \"./Footer\";\nimport PopupPanel from \"./PopupPanel\";\nimport PresetPanel from \"./PresetPanel\";\nexport default function Popup(props) {\n  var panelRender = props.panelRender,\n    internalMode = props.internalMode,\n    picker = props.picker,\n    showNow = props.showNow,\n    range = props.range,\n    multiple = props.multiple,\n    _props$activeInfo = props.activeInfo,\n    activeInfo = _props$activeInfo === void 0 ? [0, 0, 0] : _props$activeInfo,\n    presets = props.presets,\n    onPresetHover = props.onPresetHover,\n    onPresetSubmit = props.onPresetSubmit,\n    onFocus = props.onFocus,\n    onBlur = props.onBlur,\n    onPanelMouseDown = props.onPanelMouseDown,\n    direction = props.direction,\n    value = props.value,\n    onSelect = props.onSelect,\n    isInvalid = props.isInvalid,\n    defaultOpenValue = props.defaultOpenValue,\n    onOk = props.onOk,\n    onSubmit = props.onSubmit;\n  var _React$useContext = React.useContext(PickerContext),\n    prefixCls = _React$useContext.prefixCls;\n  var panelPrefixCls = \"\".concat(prefixCls, \"-panel\");\n  var rtl = direction === 'rtl';\n\n  // ========================= Refs =========================\n  var arrowRef = React.useRef(null);\n  var wrapperRef = React.useRef(null);\n\n  // ======================== Offset ========================\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    containerWidth = _React$useState2[0],\n    setContainerWidth = _React$useState2[1];\n  var _React$useState3 = React.useState(0),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    containerOffset = _React$useState4[0],\n    setContainerOffset = _React$useState4[1];\n  var _React$useState5 = React.useState(0),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    arrowOffset = _React$useState6[0],\n    setArrowOffset = _React$useState6[1];\n  var onResize = function onResize(info) {\n    if (info.width) {\n      setContainerWidth(info.width);\n    }\n  };\n  var _activeInfo = _slicedToArray(activeInfo, 3),\n    activeInputLeft = _activeInfo[0],\n    activeInputRight = _activeInfo[1],\n    selectorWidth = _activeInfo[2];\n  var _React$useState7 = React.useState(0),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    retryTimes = _React$useState8[0],\n    setRetryTimes = _React$useState8[1];\n  React.useEffect(function () {\n    setRetryTimes(10);\n  }, [activeInputLeft]);\n  React.useEffect(function () {\n    // `activeOffset` is always align with the active input element\n    // So we need only check container contains the `activeOffset`\n    if (range && wrapperRef.current) {\n      var _arrowRef$current;\n      // Offset in case container has border radius\n      var arrowWidth = ((_arrowRef$current = arrowRef.current) === null || _arrowRef$current === void 0 ? void 0 : _arrowRef$current.offsetWidth) || 0;\n\n      // Arrow Offset\n      var wrapperRect = wrapperRef.current.getBoundingClientRect();\n      if (!wrapperRect.height || wrapperRect.right < 0) {\n        setRetryTimes(function (times) {\n          return Math.max(0, times - 1);\n        });\n        return;\n      }\n      var nextArrowOffset = (rtl ? activeInputRight - arrowWidth : activeInputLeft) - wrapperRect.left;\n      setArrowOffset(nextArrowOffset);\n\n      // Container Offset\n      if (containerWidth && containerWidth < selectorWidth) {\n        var offset = rtl ? wrapperRect.right - (activeInputRight - arrowWidth + containerWidth) : activeInputLeft + arrowWidth - wrapperRect.left - containerWidth;\n        var safeOffset = Math.max(0, offset);\n        setContainerOffset(safeOffset);\n      } else {\n        setContainerOffset(0);\n      }\n    }\n  }, [retryTimes, rtl, containerWidth, activeInputLeft, activeInputRight, selectorWidth, range]);\n\n  // ======================== Custom ========================\n  function filterEmpty(list) {\n    return list.filter(function (item) {\n      return item;\n    });\n  }\n  var valueList = React.useMemo(function () {\n    return filterEmpty(toArray(value));\n  }, [value]);\n  var isTimePickerEmptyValue = picker === 'time' && !valueList.length;\n  var footerSubmitValue = React.useMemo(function () {\n    if (isTimePickerEmptyValue) {\n      return filterEmpty([defaultOpenValue]);\n    }\n    return valueList;\n  }, [isTimePickerEmptyValue, valueList, defaultOpenValue]);\n  var popupPanelValue = isTimePickerEmptyValue ? defaultOpenValue : valueList;\n  var disableSubmit = React.useMemo(function () {\n    // Empty is invalid\n    if (!footerSubmitValue.length) {\n      return true;\n    }\n    return footerSubmitValue.some(function (val) {\n      return isInvalid(val);\n    });\n  }, [footerSubmitValue, isInvalid]);\n  var onFooterSubmit = function onFooterSubmit() {\n    // For TimePicker, we will additional trigger the value update\n    if (isTimePickerEmptyValue) {\n      onSelect(defaultOpenValue);\n    }\n    onOk();\n    onSubmit();\n  };\n  var mergedNodes = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-panel-layout\")\n  }, /*#__PURE__*/React.createElement(PresetPanel, {\n    prefixCls: prefixCls,\n    presets: presets,\n    onClick: onPresetSubmit,\n    onHover: onPresetHover\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PopupPanel, _extends({}, props, {\n    value: popupPanelValue\n  })), /*#__PURE__*/React.createElement(Footer, _extends({}, props, {\n    showNow: multiple ? false : showNow,\n    invalid: disableSubmit,\n    onSubmit: onFooterSubmit\n  }))));\n  if (panelRender) {\n    mergedNodes = panelRender(mergedNodes);\n  }\n\n  // ======================== Render ========================\n  var containerPrefixCls = \"\".concat(panelPrefixCls, \"-container\");\n  var marginLeft = 'marginLeft';\n  var marginRight = 'marginRight';\n\n  // Container\n  var renderNode = /*#__PURE__*/React.createElement(\"div\", {\n    onMouseDown: onPanelMouseDown,\n    tabIndex: -1,\n    className: classNames(containerPrefixCls, // Used for Today Button style, safe to remove if no need\n    \"\".concat(prefixCls, \"-\").concat(internalMode, \"-panel-container\")),\n    style: _defineProperty(_defineProperty({}, rtl ? marginRight : marginLeft, containerOffset), rtl ? marginLeft : marginRight, 'auto')\n    // Still wish not to lose focus on mouse down\n    // onMouseDown={(e) => {\n    //   // e.preventDefault();\n    // }}\n    ,\n    onFocus: onFocus,\n    onBlur: onBlur\n  }, mergedNodes);\n  if (range) {\n    renderNode = /*#__PURE__*/React.createElement(\"div\", {\n      onMouseDown: onPanelMouseDown,\n      ref: wrapperRef,\n      className: classNames(\"\".concat(prefixCls, \"-range-wrapper\"), \"\".concat(prefixCls, \"-\").concat(picker, \"-range-wrapper\"))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: arrowRef,\n      className: \"\".concat(prefixCls, \"-range-arrow\"),\n      style: {\n        left: arrowOffset\n      }\n    }), /*#__PURE__*/React.createElement(ResizeObserver, {\n      onResize: onResize\n    }, renderNode));\n  }\n  return renderNode;\n}"]},"metadata":{},"sourceType":"module"}