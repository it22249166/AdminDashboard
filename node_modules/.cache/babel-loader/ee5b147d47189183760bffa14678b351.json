{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Portal from '@rc-component/portal';\nimport classnames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { PreviewGroupContext } from \"./context\";\n\nvar Operations = function Operations(props) {\n  var visible = props.visible,\n      maskTransitionName = props.maskTransitionName,\n      getContainer = props.getContainer,\n      prefixCls = props.prefixCls,\n      rootClassName = props.rootClassName,\n      icons = props.icons,\n      countRender = props.countRender,\n      showSwitch = props.showSwitch,\n      showProgress = props.showProgress,\n      current = props.current,\n      transform = props.transform,\n      count = props.count,\n      scale = props.scale,\n      minScale = props.minScale,\n      maxScale = props.maxScale,\n      closeIcon = props.closeIcon,\n      onActive = props.onActive,\n      onClose = props.onClose,\n      onZoomIn = props.onZoomIn,\n      onZoomOut = props.onZoomOut,\n      onRotateRight = props.onRotateRight,\n      onRotateLeft = props.onRotateLeft,\n      onFlipX = props.onFlipX,\n      onFlipY = props.onFlipY,\n      onReset = props.onReset,\n      toolbarRender = props.toolbarRender,\n      zIndex = props.zIndex,\n      image = props.image;\n  var groupContext = useContext(PreviewGroupContext);\n  var rotateLeft = icons.rotateLeft,\n      rotateRight = icons.rotateRight,\n      zoomIn = icons.zoomIn,\n      zoomOut = icons.zoomOut,\n      close = icons.close,\n      left = icons.left,\n      right = icons.right,\n      flipX = icons.flipX,\n      flipY = icons.flipY;\n  var toolClassName = \"\".concat(prefixCls, \"-operations-operation\");\n  React.useEffect(function () {\n    var onKeyDown = function onKeyDown(e) {\n      if (e.keyCode === KeyCode.ESC) {\n        onClose();\n      }\n    };\n\n    if (visible) {\n      window.addEventListener('keydown', onKeyDown);\n    }\n\n    return function () {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [visible]);\n\n  var handleActive = function handleActive(e, offset) {\n    e.preventDefault();\n    e.stopPropagation();\n    onActive(offset);\n  };\n\n  var renderOperation = React.useCallback(function (_ref) {\n    var type = _ref.type,\n        disabled = _ref.disabled,\n        onClick = _ref.onClick,\n        icon = _ref.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: type,\n      className: classnames(toolClassName, \"\".concat(prefixCls, \"-operations-operation-\").concat(type), _defineProperty({}, \"\".concat(prefixCls, \"-operations-operation-disabled\"), !!disabled)),\n      onClick: onClick\n    }, icon);\n  }, [toolClassName, prefixCls]);\n  var switchPrevNode = showSwitch ? renderOperation({\n    icon: left,\n    onClick: function onClick(e) {\n      return handleActive(e, -1);\n    },\n    type: 'prev',\n    disabled: current === 0\n  }) : undefined;\n  var switchNextNode = showSwitch ? renderOperation({\n    icon: right,\n    onClick: function onClick(e) {\n      return handleActive(e, 1);\n    },\n    type: 'next',\n    disabled: current === count - 1\n  }) : undefined;\n  var flipYNode = renderOperation({\n    icon: flipY,\n    onClick: onFlipY,\n    type: 'flipY'\n  });\n  var flipXNode = renderOperation({\n    icon: flipX,\n    onClick: onFlipX,\n    type: 'flipX'\n  });\n  var rotateLeftNode = renderOperation({\n    icon: rotateLeft,\n    onClick: onRotateLeft,\n    type: 'rotateLeft'\n  });\n  var rotateRightNode = renderOperation({\n    icon: rotateRight,\n    onClick: onRotateRight,\n    type: 'rotateRight'\n  });\n  var zoomOutNode = renderOperation({\n    icon: zoomOut,\n    onClick: onZoomOut,\n    type: 'zoomOut',\n    disabled: scale <= minScale\n  });\n  var zoomInNode = renderOperation({\n    icon: zoomIn,\n    onClick: onZoomIn,\n    type: 'zoomIn',\n    disabled: scale === maxScale\n  });\n  var toolbarNode = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-operations\")\n  }, flipYNode, flipXNode, rotateLeftNode, rotateRightNode, zoomOutNode, zoomInNode);\n  return /*#__PURE__*/React.createElement(CSSMotion, {\n    visible: visible,\n    motionName: maskTransitionName\n  }, function (_ref2) {\n    var className = _ref2.className,\n        style = _ref2.style;\n    return /*#__PURE__*/React.createElement(Portal, {\n      open: true,\n      getContainer: getContainer !== null && getContainer !== void 0 ? getContainer : document.body\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-operations-wrapper\"), className, rootClassName),\n      style: _objectSpread(_objectSpread({}, style), {}, {\n        zIndex: zIndex\n      })\n    }, closeIcon === null ? null : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"\".concat(prefixCls, \"-close\"),\n      onClick: onClose\n    }, closeIcon || close), showSwitch && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-switch-left\"), _defineProperty({}, \"\".concat(prefixCls, \"-switch-left-disabled\"), current === 0)),\n      onClick: function onClick(e) {\n        return handleActive(e, -1);\n      }\n    }, left), /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-switch-right\"), _defineProperty({}, \"\".concat(prefixCls, \"-switch-right-disabled\"), current === count - 1)),\n      onClick: function onClick(e) {\n        return handleActive(e, 1);\n      }\n    }, right)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-footer\")\n    }, showProgress && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-progress\")\n    }, countRender ? countRender(current + 1, count) : /*#__PURE__*/React.createElement(\"bdi\", null, \"\".concat(current + 1, \" / \").concat(count))), toolbarRender ? toolbarRender(toolbarNode, _objectSpread(_objectSpread({\n      icons: {\n        prevIcon: switchPrevNode,\n        nextIcon: switchNextNode,\n        flipYIcon: flipYNode,\n        flipXIcon: flipXNode,\n        rotateLeftIcon: rotateLeftNode,\n        rotateRightIcon: rotateRightNode,\n        zoomOutIcon: zoomOutNode,\n        zoomInIcon: zoomInNode\n      },\n      actions: {\n        onActive: onActive,\n        onFlipY: onFlipY,\n        onFlipX: onFlipX,\n        onRotateLeft: onRotateLeft,\n        onRotateRight: onRotateRight,\n        onZoomOut: onZoomOut,\n        onZoomIn: onZoomIn,\n        onReset: onReset,\n        onClose: onClose\n      },\n      transform: transform\n    }, groupContext ? {\n      current: current,\n      total: count\n    } : {}), {}, {\n      image: image\n    })) : toolbarNode)));\n  });\n};\n\nexport default Operations;","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-image/es/Operations.js"],"names":["_objectSpread","_defineProperty","Portal","classnames","CSSMotion","KeyCode","React","useContext","PreviewGroupContext","Operations","props","visible","maskTransitionName","getContainer","prefixCls","rootClassName","icons","countRender","showSwitch","showProgress","current","transform","count","scale","minScale","maxScale","closeIcon","onActive","onClose","onZoomIn","onZoomOut","onRotateRight","onRotateLeft","onFlipX","onFlipY","onReset","toolbarRender","zIndex","image","groupContext","rotateLeft","rotateRight","zoomIn","zoomOut","close","left","right","flipX","flipY","toolClassName","concat","useEffect","onKeyDown","e","keyCode","ESC","window","addEventListener","removeEventListener","handleActive","offset","preventDefault","stopPropagation","renderOperation","useCallback","_ref","type","disabled","onClick","icon","createElement","key","className","switchPrevNode","undefined","switchNextNode","flipYNode","flipXNode","rotateLeftNode","rotateRightNode","zoomOutNode","zoomInNode","toolbarNode","motionName","_ref2","style","open","document","body","Fragment","prevIcon","nextIcon","flipYIcon","flipXIcon","rotateLeftIcon","rotateRightIcon","zoomOutIcon","zoomInIcon","actions","total"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Portal from '@rc-component/portal';\nimport classnames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { PreviewGroupContext } from \"./context\";\nvar Operations = function Operations(props) {\n  var visible = props.visible,\n    maskTransitionName = props.maskTransitionName,\n    getContainer = props.getContainer,\n    prefixCls = props.prefixCls,\n    rootClassName = props.rootClassName,\n    icons = props.icons,\n    countRender = props.countRender,\n    showSwitch = props.showSwitch,\n    showProgress = props.showProgress,\n    current = props.current,\n    transform = props.transform,\n    count = props.count,\n    scale = props.scale,\n    minScale = props.minScale,\n    maxScale = props.maxScale,\n    closeIcon = props.closeIcon,\n    onActive = props.onActive,\n    onClose = props.onClose,\n    onZoomIn = props.onZoomIn,\n    onZoomOut = props.onZoomOut,\n    onRotateRight = props.onRotateRight,\n    onRotateLeft = props.onRotateLeft,\n    onFlipX = props.onFlipX,\n    onFlipY = props.onFlipY,\n    onReset = props.onReset,\n    toolbarRender = props.toolbarRender,\n    zIndex = props.zIndex,\n    image = props.image;\n  var groupContext = useContext(PreviewGroupContext);\n  var rotateLeft = icons.rotateLeft,\n    rotateRight = icons.rotateRight,\n    zoomIn = icons.zoomIn,\n    zoomOut = icons.zoomOut,\n    close = icons.close,\n    left = icons.left,\n    right = icons.right,\n    flipX = icons.flipX,\n    flipY = icons.flipY;\n  var toolClassName = \"\".concat(prefixCls, \"-operations-operation\");\n  React.useEffect(function () {\n    var onKeyDown = function onKeyDown(e) {\n      if (e.keyCode === KeyCode.ESC) {\n        onClose();\n      }\n    };\n    if (visible) {\n      window.addEventListener('keydown', onKeyDown);\n    }\n    return function () {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [visible]);\n  var handleActive = function handleActive(e, offset) {\n    e.preventDefault();\n    e.stopPropagation();\n    onActive(offset);\n  };\n  var renderOperation = React.useCallback(function (_ref) {\n    var type = _ref.type,\n      disabled = _ref.disabled,\n      onClick = _ref.onClick,\n      icon = _ref.icon;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: type,\n      className: classnames(toolClassName, \"\".concat(prefixCls, \"-operations-operation-\").concat(type), _defineProperty({}, \"\".concat(prefixCls, \"-operations-operation-disabled\"), !!disabled)),\n      onClick: onClick\n    }, icon);\n  }, [toolClassName, prefixCls]);\n  var switchPrevNode = showSwitch ? renderOperation({\n    icon: left,\n    onClick: function onClick(e) {\n      return handleActive(e, -1);\n    },\n    type: 'prev',\n    disabled: current === 0\n  }) : undefined;\n  var switchNextNode = showSwitch ? renderOperation({\n    icon: right,\n    onClick: function onClick(e) {\n      return handleActive(e, 1);\n    },\n    type: 'next',\n    disabled: current === count - 1\n  }) : undefined;\n  var flipYNode = renderOperation({\n    icon: flipY,\n    onClick: onFlipY,\n    type: 'flipY'\n  });\n  var flipXNode = renderOperation({\n    icon: flipX,\n    onClick: onFlipX,\n    type: 'flipX'\n  });\n  var rotateLeftNode = renderOperation({\n    icon: rotateLeft,\n    onClick: onRotateLeft,\n    type: 'rotateLeft'\n  });\n  var rotateRightNode = renderOperation({\n    icon: rotateRight,\n    onClick: onRotateRight,\n    type: 'rotateRight'\n  });\n  var zoomOutNode = renderOperation({\n    icon: zoomOut,\n    onClick: onZoomOut,\n    type: 'zoomOut',\n    disabled: scale <= minScale\n  });\n  var zoomInNode = renderOperation({\n    icon: zoomIn,\n    onClick: onZoomIn,\n    type: 'zoomIn',\n    disabled: scale === maxScale\n  });\n  var toolbarNode = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-operations\")\n  }, flipYNode, flipXNode, rotateLeftNode, rotateRightNode, zoomOutNode, zoomInNode);\n  return /*#__PURE__*/React.createElement(CSSMotion, {\n    visible: visible,\n    motionName: maskTransitionName\n  }, function (_ref2) {\n    var className = _ref2.className,\n      style = _ref2.style;\n    return /*#__PURE__*/React.createElement(Portal, {\n      open: true,\n      getContainer: getContainer !== null && getContainer !== void 0 ? getContainer : document.body\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-operations-wrapper\"), className, rootClassName),\n      style: _objectSpread(_objectSpread({}, style), {}, {\n        zIndex: zIndex\n      })\n    }, closeIcon === null ? null : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"\".concat(prefixCls, \"-close\"),\n      onClick: onClose\n    }, closeIcon || close), showSwitch && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-switch-left\"), _defineProperty({}, \"\".concat(prefixCls, \"-switch-left-disabled\"), current === 0)),\n      onClick: function onClick(e) {\n        return handleActive(e, -1);\n      }\n    }, left), /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(\"\".concat(prefixCls, \"-switch-right\"), _defineProperty({}, \"\".concat(prefixCls, \"-switch-right-disabled\"), current === count - 1)),\n      onClick: function onClick(e) {\n        return handleActive(e, 1);\n      }\n    }, right)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-footer\")\n    }, showProgress && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-progress\")\n    }, countRender ? countRender(current + 1, count) : /*#__PURE__*/React.createElement(\"bdi\", null, \"\".concat(current + 1, \" / \").concat(count))), toolbarRender ? toolbarRender(toolbarNode, _objectSpread(_objectSpread({\n      icons: {\n        prevIcon: switchPrevNode,\n        nextIcon: switchNextNode,\n        flipYIcon: flipYNode,\n        flipXIcon: flipXNode,\n        rotateLeftIcon: rotateLeftNode,\n        rotateRightIcon: rotateRightNode,\n        zoomOutIcon: zoomOutNode,\n        zoomInIcon: zoomInNode\n      },\n      actions: {\n        onActive: onActive,\n        onFlipY: onFlipY,\n        onFlipX: onFlipX,\n        onRotateLeft: onRotateLeft,\n        onRotateRight: onRotateRight,\n        onZoomOut: onZoomOut,\n        onZoomIn: onZoomIn,\n        onReset: onReset,\n        onClose: onClose\n      },\n      transform: transform\n    }, groupContext ? {\n      current: current,\n      total: count\n    } : {}), {}, {\n      image: image\n    })) : toolbarNode)));\n  });\n};\nexport default Operations;"]},"metadata":{},"sourceType":"module"}