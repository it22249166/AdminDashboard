{"ast":null,"code":"import { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport { warning } from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open);\n  openRef.current = open;\n  var popupPointerDownRef = React.useRef(false); // Click to hide is special action since click popup element should not hide\n\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var onPointerDown = function onPointerDown() {\n        popupPointerDownRef.current = false;\n      };\n\n      var onTriggerClose = function onTriggerClose(e) {\n        var _e$composedPath;\n\n        if (openRef.current && !inPopupOrChild(((_e$composedPath = e.composedPath) === null || _e$composedPath === void 0 || (_e$composedPath = _e$composedPath.call(e)) === null || _e$composedPath === void 0 ? void 0 : _e$composedPath[0]) || e.target) && !popupPointerDownRef.current) {\n          triggerOpen(false);\n        }\n      };\n\n      var win = getWin(popupEle);\n      win.addEventListener('pointerdown', onPointerDown, true);\n      win.addEventListener('mousedown', onTriggerClose, true);\n      win.addEventListener('contextmenu', onTriggerClose, true); // shadow root\n\n      var targetShadowRoot = getShadowRoot(targetEle);\n\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onTriggerClose, true);\n        targetShadowRoot.addEventListener('contextmenu', onTriggerClose, true);\n      } // Warning if target and popup not in same root\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n\n        var targetRoot = targetEle === null || targetEle === void 0 || (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n\n      return function () {\n        win.removeEventListener('pointerdown', onPointerDown, true);\n        win.removeEventListener('mousedown', onTriggerClose, true);\n        win.removeEventListener('contextmenu', onTriggerClose, true);\n\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onTriggerClose, true);\n          targetShadowRoot.removeEventListener('contextmenu', onTriggerClose, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n\n  function onPopupPointerDown() {\n    popupPointerDownRef.current = true;\n  }\n\n  return onPopupPointerDown;\n}","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/@rc-component/trigger/es/hooks/useWinClick.js"],"names":["getShadowRoot","warning","React","getWin","useWinClick","open","clickToHide","targetEle","popupEle","mask","maskClosable","inPopupOrChild","triggerOpen","openRef","useRef","current","popupPointerDownRef","useEffect","onPointerDown","onTriggerClose","e","_e$composedPath","composedPath","call","target","win","addEventListener","targetShadowRoot","process","env","NODE_ENV","_targetEle$getRootNod","_popupEle$getRootNode","targetRoot","getRootNode","popupRoot","removeEventListener","onPopupPointerDown"],"mappings":"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","sourcesContent":["import { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport { warning } from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open);\n  openRef.current = open;\n  var popupPointerDownRef = React.useRef(false);\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var onPointerDown = function onPointerDown() {\n        popupPointerDownRef.current = false;\n      };\n      var onTriggerClose = function onTriggerClose(e) {\n        var _e$composedPath;\n        if (openRef.current && !inPopupOrChild(((_e$composedPath = e.composedPath) === null || _e$composedPath === void 0 || (_e$composedPath = _e$composedPath.call(e)) === null || _e$composedPath === void 0 ? void 0 : _e$composedPath[0]) || e.target) && !popupPointerDownRef.current) {\n          triggerOpen(false);\n        }\n      };\n      var win = getWin(popupEle);\n      win.addEventListener('pointerdown', onPointerDown, true);\n      win.addEventListener('mousedown', onTriggerClose, true);\n      win.addEventListener('contextmenu', onTriggerClose, true);\n\n      // shadow root\n      var targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onTriggerClose, true);\n        targetShadowRoot.addEventListener('contextmenu', onTriggerClose, true);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n        var targetRoot = targetEle === null || targetEle === void 0 || (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n      return function () {\n        win.removeEventListener('pointerdown', onPointerDown, true);\n        win.removeEventListener('mousedown', onTriggerClose, true);\n        win.removeEventListener('contextmenu', onTriggerClose, true);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onTriggerClose, true);\n          targetShadowRoot.removeEventListener('contextmenu', onTriggerClose, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n  function onPopupPointerDown() {\n    popupPointerDownRef.current = true;\n  }\n  return onPopupPointerDown;\n}"]},"metadata":{},"sourceType":"module"}