{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport Dropdown from 'rc-dropdown';\nimport Menu, { MenuItem } from 'rc-menu';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { getRemovable } from \"../util\";\nimport AddButton from \"./AddButton\";\nvar OperationNode = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n      id = props.id,\n      tabs = props.tabs,\n      locale = props.locale,\n      mobile = props.mobile,\n      _props$more = props.more,\n      moreProps = _props$more === void 0 ? {} : _props$more,\n      style = props.style,\n      className = props.className,\n      editable = props.editable,\n      tabBarGutter = props.tabBarGutter,\n      rtl = props.rtl,\n      removeAriaLabel = props.removeAriaLabel,\n      onTabClick = props.onTabClick,\n      getPopupContainer = props.getPopupContainer,\n      popupClassName = props.popupClassName; // ======================== Dropdown ========================\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedKey = _useState4[0],\n      setSelectedKey = _useState4[1];\n\n  var _moreProps$icon = moreProps.icon,\n      moreIcon = _moreProps$icon === void 0 ? 'More' : _moreProps$icon;\n  var popupId = \"\".concat(id, \"-more-popup\");\n  var dropdownPrefix = \"\".concat(prefixCls, \"-dropdown\");\n  var selectedItemId = selectedKey !== null ? \"\".concat(popupId, \"-\").concat(selectedKey) : null;\n  var dropdownAriaLabel = locale === null || locale === void 0 ? void 0 : locale.dropdownAriaLabel;\n\n  function onRemoveTab(event, key) {\n    event.preventDefault();\n    event.stopPropagation();\n    editable.onEdit('remove', {\n      key: key,\n      event: event\n    });\n  }\n\n  var menu = /*#__PURE__*/React.createElement(Menu, {\n    onClick: function onClick(_ref) {\n      var key = _ref.key,\n          domEvent = _ref.domEvent;\n      onTabClick(key, domEvent);\n      setOpen(false);\n    },\n    prefixCls: \"\".concat(dropdownPrefix, \"-menu\"),\n    id: popupId,\n    tabIndex: -1,\n    role: \"listbox\",\n    \"aria-activedescendant\": selectedItemId,\n    selectedKeys: [selectedKey],\n    \"aria-label\": dropdownAriaLabel !== undefined ? dropdownAriaLabel : 'expanded dropdown'\n  }, tabs.map(function (tab) {\n    var closable = tab.closable,\n        disabled = tab.disabled,\n        closeIcon = tab.closeIcon,\n        key = tab.key,\n        label = tab.label;\n    var removable = getRemovable(closable, closeIcon, editable, disabled);\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: key,\n      id: \"\".concat(popupId, \"-\").concat(key),\n      role: \"option\",\n      \"aria-controls\": id && \"\".concat(id, \"-panel-\").concat(key),\n      disabled: disabled\n    }, /*#__PURE__*/React.createElement(\"span\", null, label), removable && /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"aria-label\": removeAriaLabel || 'remove',\n      tabIndex: 0,\n      className: \"\".concat(dropdownPrefix, \"-menu-item-remove\"),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        onRemoveTab(e, key);\n      }\n    }, closeIcon || editable.removeIcon || 'Ã—'));\n  }));\n\n  function selectOffset(offset) {\n    var enabledTabs = tabs.filter(function (tab) {\n      return !tab.disabled;\n    });\n    var selectedIndex = enabledTabs.findIndex(function (tab) {\n      return tab.key === selectedKey;\n    }) || 0;\n    var len = enabledTabs.length;\n\n    for (var i = 0; i < len; i += 1) {\n      selectedIndex = (selectedIndex + offset + len) % len;\n      var tab = enabledTabs[selectedIndex];\n\n      if (!tab.disabled) {\n        setSelectedKey(tab.key);\n        return;\n      }\n    }\n  }\n\n  function onKeyDown(e) {\n    var which = e.which;\n\n    if (!open) {\n      if ([KeyCode.DOWN, KeyCode.SPACE, KeyCode.ENTER].includes(which)) {\n        setOpen(true);\n        e.preventDefault();\n      }\n\n      return;\n    }\n\n    switch (which) {\n      case KeyCode.UP:\n        selectOffset(-1);\n        e.preventDefault();\n        break;\n\n      case KeyCode.DOWN:\n        selectOffset(1);\n        e.preventDefault();\n        break;\n\n      case KeyCode.ESC:\n        setOpen(false);\n        break;\n\n      case KeyCode.SPACE:\n      case KeyCode.ENTER:\n        if (selectedKey !== null) {\n          onTabClick(selectedKey, e);\n        }\n\n        break;\n    }\n  } // ========================= Effect =========================\n\n\n  useEffect(function () {\n    // We use query element here to avoid React strict warning\n    var ele = document.getElementById(selectedItemId);\n\n    if (ele && ele.scrollIntoView) {\n      ele.scrollIntoView(false);\n    }\n  }, [selectedKey]);\n  useEffect(function () {\n    if (!open) {\n      setSelectedKey(null);\n    }\n  }, [open]); // ========================= Render =========================\n\n  var moreStyle = _defineProperty({}, rtl ? 'marginRight' : 'marginLeft', tabBarGutter);\n\n  if (!tabs.length) {\n    moreStyle.visibility = 'hidden';\n    moreStyle.order = 1;\n  }\n\n  var overlayClassName = classNames(_defineProperty({}, \"\".concat(dropdownPrefix, \"-rtl\"), rtl));\n  var moreNode = mobile ? null : /*#__PURE__*/React.createElement(Dropdown, _extends({\n    prefixCls: dropdownPrefix,\n    overlay: menu,\n    visible: tabs.length ? open : false,\n    onVisibleChange: setOpen,\n    overlayClassName: classNames(overlayClassName, popupClassName),\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    getPopupContainer: getPopupContainer\n  }, moreProps), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"\".concat(prefixCls, \"-nav-more\"),\n    style: moreStyle,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-controls\": popupId,\n    id: \"\".concat(id, \"-more\"),\n    \"aria-expanded\": open,\n    onKeyDown: onKeyDown\n  }, moreIcon));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-nav-operations\"), className),\n    style: style,\n    ref: ref\n  }, moreNode, /*#__PURE__*/React.createElement(AddButton, {\n    prefixCls: prefixCls,\n    locale: locale,\n    editable: editable\n  }));\n});\nexport default /*#__PURE__*/React.memo(OperationNode, function (_, next) {\n  return (// https://github.com/ant-design/ant-design/issues/32544\n    // We'd better remove syntactic sugar in `rc-menu` since this has perf issue\n    next.tabMoving\n  );\n});","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-tabs/es/TabNavList/OperationNode.js"],"names":["_extends","_defineProperty","_slicedToArray","classNames","Dropdown","Menu","MenuItem","KeyCode","React","useEffect","useState","getRemovable","AddButton","OperationNode","forwardRef","props","ref","prefixCls","id","tabs","locale","mobile","_props$more","more","moreProps","style","className","editable","tabBarGutter","rtl","removeAriaLabel","onTabClick","getPopupContainer","popupClassName","_useState","_useState2","open","setOpen","_useState3","_useState4","selectedKey","setSelectedKey","_moreProps$icon","icon","moreIcon","popupId","concat","dropdownPrefix","selectedItemId","dropdownAriaLabel","onRemoveTab","event","key","preventDefault","stopPropagation","onEdit","menu","createElement","onClick","_ref","domEvent","tabIndex","role","selectedKeys","undefined","map","tab","closable","disabled","closeIcon","label","removable","type","e","removeIcon","selectOffset","offset","enabledTabs","filter","selectedIndex","findIndex","len","length","i","onKeyDown","which","DOWN","SPACE","ENTER","includes","UP","ESC","ele","document","getElementById","scrollIntoView","moreStyle","visibility","order","overlayClassName","moreNode","overlay","visible","onVisibleChange","mouseEnterDelay","mouseLeaveDelay","memo","_","next","tabMoving"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport Dropdown from 'rc-dropdown';\nimport Menu, { MenuItem } from 'rc-menu';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { getRemovable } from \"../util\";\nimport AddButton from \"./AddButton\";\nvar OperationNode = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    id = props.id,\n    tabs = props.tabs,\n    locale = props.locale,\n    mobile = props.mobile,\n    _props$more = props.more,\n    moreProps = _props$more === void 0 ? {} : _props$more,\n    style = props.style,\n    className = props.className,\n    editable = props.editable,\n    tabBarGutter = props.tabBarGutter,\n    rtl = props.rtl,\n    removeAriaLabel = props.removeAriaLabel,\n    onTabClick = props.onTabClick,\n    getPopupContainer = props.getPopupContainer,\n    popupClassName = props.popupClassName;\n  // ======================== Dropdown ========================\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    open = _useState2[0],\n    setOpen = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedKey = _useState4[0],\n    setSelectedKey = _useState4[1];\n  var _moreProps$icon = moreProps.icon,\n    moreIcon = _moreProps$icon === void 0 ? 'More' : _moreProps$icon;\n  var popupId = \"\".concat(id, \"-more-popup\");\n  var dropdownPrefix = \"\".concat(prefixCls, \"-dropdown\");\n  var selectedItemId = selectedKey !== null ? \"\".concat(popupId, \"-\").concat(selectedKey) : null;\n  var dropdownAriaLabel = locale === null || locale === void 0 ? void 0 : locale.dropdownAriaLabel;\n  function onRemoveTab(event, key) {\n    event.preventDefault();\n    event.stopPropagation();\n    editable.onEdit('remove', {\n      key: key,\n      event: event\n    });\n  }\n  var menu = /*#__PURE__*/React.createElement(Menu, {\n    onClick: function onClick(_ref) {\n      var key = _ref.key,\n        domEvent = _ref.domEvent;\n      onTabClick(key, domEvent);\n      setOpen(false);\n    },\n    prefixCls: \"\".concat(dropdownPrefix, \"-menu\"),\n    id: popupId,\n    tabIndex: -1,\n    role: \"listbox\",\n    \"aria-activedescendant\": selectedItemId,\n    selectedKeys: [selectedKey],\n    \"aria-label\": dropdownAriaLabel !== undefined ? dropdownAriaLabel : 'expanded dropdown'\n  }, tabs.map(function (tab) {\n    var closable = tab.closable,\n      disabled = tab.disabled,\n      closeIcon = tab.closeIcon,\n      key = tab.key,\n      label = tab.label;\n    var removable = getRemovable(closable, closeIcon, editable, disabled);\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: key,\n      id: \"\".concat(popupId, \"-\").concat(key),\n      role: \"option\",\n      \"aria-controls\": id && \"\".concat(id, \"-panel-\").concat(key),\n      disabled: disabled\n    }, /*#__PURE__*/React.createElement(\"span\", null, label), removable && /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"aria-label\": removeAriaLabel || 'remove',\n      tabIndex: 0,\n      className: \"\".concat(dropdownPrefix, \"-menu-item-remove\"),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        onRemoveTab(e, key);\n      }\n    }, closeIcon || editable.removeIcon || 'Ã—'));\n  }));\n  function selectOffset(offset) {\n    var enabledTabs = tabs.filter(function (tab) {\n      return !tab.disabled;\n    });\n    var selectedIndex = enabledTabs.findIndex(function (tab) {\n      return tab.key === selectedKey;\n    }) || 0;\n    var len = enabledTabs.length;\n    for (var i = 0; i < len; i += 1) {\n      selectedIndex = (selectedIndex + offset + len) % len;\n      var tab = enabledTabs[selectedIndex];\n      if (!tab.disabled) {\n        setSelectedKey(tab.key);\n        return;\n      }\n    }\n  }\n  function onKeyDown(e) {\n    var which = e.which;\n    if (!open) {\n      if ([KeyCode.DOWN, KeyCode.SPACE, KeyCode.ENTER].includes(which)) {\n        setOpen(true);\n        e.preventDefault();\n      }\n      return;\n    }\n    switch (which) {\n      case KeyCode.UP:\n        selectOffset(-1);\n        e.preventDefault();\n        break;\n      case KeyCode.DOWN:\n        selectOffset(1);\n        e.preventDefault();\n        break;\n      case KeyCode.ESC:\n        setOpen(false);\n        break;\n      case KeyCode.SPACE:\n      case KeyCode.ENTER:\n        if (selectedKey !== null) {\n          onTabClick(selectedKey, e);\n        }\n        break;\n    }\n  }\n\n  // ========================= Effect =========================\n  useEffect(function () {\n    // We use query element here to avoid React strict warning\n    var ele = document.getElementById(selectedItemId);\n    if (ele && ele.scrollIntoView) {\n      ele.scrollIntoView(false);\n    }\n  }, [selectedKey]);\n  useEffect(function () {\n    if (!open) {\n      setSelectedKey(null);\n    }\n  }, [open]);\n\n  // ========================= Render =========================\n  var moreStyle = _defineProperty({}, rtl ? 'marginRight' : 'marginLeft', tabBarGutter);\n  if (!tabs.length) {\n    moreStyle.visibility = 'hidden';\n    moreStyle.order = 1;\n  }\n  var overlayClassName = classNames(_defineProperty({}, \"\".concat(dropdownPrefix, \"-rtl\"), rtl));\n  var moreNode = mobile ? null : /*#__PURE__*/React.createElement(Dropdown, _extends({\n    prefixCls: dropdownPrefix,\n    overlay: menu,\n    visible: tabs.length ? open : false,\n    onVisibleChange: setOpen,\n    overlayClassName: classNames(overlayClassName, popupClassName),\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    getPopupContainer: getPopupContainer\n  }, moreProps), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"\".concat(prefixCls, \"-nav-more\"),\n    style: moreStyle,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-controls\": popupId,\n    id: \"\".concat(id, \"-more\"),\n    \"aria-expanded\": open,\n    onKeyDown: onKeyDown\n  }, moreIcon));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(prefixCls, \"-nav-operations\"), className),\n    style: style,\n    ref: ref\n  }, moreNode, /*#__PURE__*/React.createElement(AddButton, {\n    prefixCls: prefixCls,\n    locale: locale,\n    editable: editable\n  }));\n});\nexport default /*#__PURE__*/React.memo(OperationNode, function (_, next) {\n  return (\n    // https://github.com/ant-design/ant-design/issues/32544\n    // We'd better remove syntactic sugar in `rc-menu` since this has perf issue\n    next.tabMoving\n  );\n});"]},"metadata":{},"sourceType":"module"}