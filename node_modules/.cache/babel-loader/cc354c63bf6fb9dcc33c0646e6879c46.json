{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"id\", \"prefixCls\", \"value\", \"defaultValue\", \"onChange\", \"onSelect\", \"onDeselect\", \"searchValue\", \"inputValue\", \"onSearch\", \"autoClearSearchValue\", \"filterTreeNode\", \"treeNodeFilterProp\", \"showCheckedStrategy\", \"treeNodeLabelProp\", \"multiple\", \"treeCheckable\", \"treeCheckStrictly\", \"labelInValue\", \"maxCount\", \"fieldNames\", \"treeDataSimpleMode\", \"treeData\", \"children\", \"loadData\", \"treeLoadedKeys\", \"onTreeLoad\", \"treeDefaultExpandAll\", \"treeExpandedKeys\", \"treeDefaultExpandedKeys\", \"onTreeExpand\", \"treeExpandAction\", \"virtual\", \"listHeight\", \"listItemHeight\", \"listItemScrollOffset\", \"onDropdownVisibleChange\", \"dropdownMatchSelectWidth\", \"treeLine\", \"treeIcon\", \"showTreeIcon\", \"switcherIcon\", \"treeMotion\", \"treeTitleRender\", \"onPopupScroll\"];\nimport { BaseSelect } from 'rc-select';\nimport useId from \"rc-select/es/hooks/useId\";\nimport { conductCheck } from \"rc-tree/es/utils/conductUtil\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport useCache from \"./hooks/useCache\";\nimport useCheckedKeys from \"./hooks/useCheckedKeys\";\nimport useDataEntities from \"./hooks/useDataEntities\";\nimport useFilterTreeData from \"./hooks/useFilterTreeData\";\nimport useRefFunc from \"./hooks/useRefFunc\";\nimport useTreeData from \"./hooks/useTreeData\";\nimport LegacyContext from \"./LegacyContext\";\nimport OptionList from \"./OptionList\";\nimport TreeNode from \"./TreeNode\";\nimport TreeSelectContext from \"./TreeSelectContext\";\nimport { fillAdditionalInfo, fillLegacyProps } from \"./utils/legacyUtil\";\nimport { formatStrategyValues, SHOW_ALL, SHOW_CHILD, SHOW_PARENT } from \"./utils/strategyUtil\";\nimport { fillFieldNames, isNil, toArray } from \"./utils/valueUtil\";\nimport warningProps from \"./utils/warningPropsUtil\";\n\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\n\nvar TreeSelect = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-tree-select' : _props$prefixCls,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onDeselect = props.onDeselect,\n      searchValue = props.searchValue,\n      inputValue = props.inputValue,\n      onSearch = props.onSearch,\n      _props$autoClearSearc = props.autoClearSearchValue,\n      autoClearSearchValue = _props$autoClearSearc === void 0 ? true : _props$autoClearSearc,\n      filterTreeNode = props.filterTreeNode,\n      _props$treeNodeFilter = props.treeNodeFilterProp,\n      treeNodeFilterProp = _props$treeNodeFilter === void 0 ? 'value' : _props$treeNodeFilter,\n      showCheckedStrategy = props.showCheckedStrategy,\n      treeNodeLabelProp = props.treeNodeLabelProp,\n      multiple = props.multiple,\n      treeCheckable = props.treeCheckable,\n      treeCheckStrictly = props.treeCheckStrictly,\n      labelInValue = props.labelInValue,\n      maxCount = props.maxCount,\n      fieldNames = props.fieldNames,\n      treeDataSimpleMode = props.treeDataSimpleMode,\n      treeData = props.treeData,\n      children = props.children,\n      loadData = props.loadData,\n      treeLoadedKeys = props.treeLoadedKeys,\n      onTreeLoad = props.onTreeLoad,\n      treeDefaultExpandAll = props.treeDefaultExpandAll,\n      treeExpandedKeys = props.treeExpandedKeys,\n      treeDefaultExpandedKeys = props.treeDefaultExpandedKeys,\n      onTreeExpand = props.onTreeExpand,\n      treeExpandAction = props.treeExpandAction,\n      virtual = props.virtual,\n      _props$listHeight = props.listHeight,\n      listHeight = _props$listHeight === void 0 ? 200 : _props$listHeight,\n      _props$listItemHeight = props.listItemHeight,\n      listItemHeight = _props$listItemHeight === void 0 ? 20 : _props$listItemHeight,\n      _props$listItemScroll = props.listItemScrollOffset,\n      listItemScrollOffset = _props$listItemScroll === void 0 ? 0 : _props$listItemScroll,\n      onDropdownVisibleChange = props.onDropdownVisibleChange,\n      _props$dropdownMatchS = props.dropdownMatchSelectWidth,\n      dropdownMatchSelectWidth = _props$dropdownMatchS === void 0 ? true : _props$dropdownMatchS,\n      treeLine = props.treeLine,\n      treeIcon = props.treeIcon,\n      showTreeIcon = props.showTreeIcon,\n      switcherIcon = props.switcherIcon,\n      treeMotion = props.treeMotion,\n      treeTitleRender = props.treeTitleRender,\n      onPopupScroll = props.onPopupScroll,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedId = useId(id);\n  var treeConduction = treeCheckable && !treeCheckStrictly;\n  var mergedCheckable = treeCheckable || treeCheckStrictly;\n  var mergedLabelInValue = treeCheckStrictly || labelInValue;\n  var mergedMultiple = mergedCheckable || multiple;\n\n  var _useMergedState = useMergedState(defaultValue, {\n    value: value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      internalValue = _useMergedState2[0],\n      setInternalValue = _useMergedState2[1]; // `multiple` && `!treeCheckable` should be show all\n\n\n  var mergedShowCheckedStrategy = React.useMemo(function () {\n    if (!treeCheckable) {\n      return SHOW_ALL;\n    }\n\n    return showCheckedStrategy || SHOW_CHILD;\n  }, [showCheckedStrategy, treeCheckable]); // ========================== Warning ===========================\n\n  if (process.env.NODE_ENV !== 'production') {\n    warningProps(props);\n  } // ========================= FieldNames =========================\n\n\n  var mergedFieldNames = React.useMemo(function () {\n    return fillFieldNames(fieldNames);\n  },\n  /* eslint-disable react-hooks/exhaustive-deps */\n  [JSON.stringify(fieldNames)]\n  /* eslint-enable react-hooks/exhaustive-deps */\n  ); // =========================== Search ===========================\n\n  var _useMergedState3 = useMergedState('', {\n    value: searchValue !== undefined ? searchValue : inputValue,\n    postState: function postState(search) {\n      return search || '';\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      mergedSearchValue = _useMergedState4[0],\n      setSearchValue = _useMergedState4[1];\n\n  var onInternalSearch = function onInternalSearch(searchText) {\n    setSearchValue(searchText);\n    onSearch === null || onSearch === void 0 || onSearch(searchText);\n  }; // ============================ Data ============================\n  // `useTreeData` only do convert of `children` or `simpleMode`.\n  // Else will return origin `treeData` for perf consideration.\n  // Do not do anything to loop the data.\n\n\n  var mergedTreeData = useTreeData(treeData, children, treeDataSimpleMode);\n\n  var _useDataEntities = useDataEntities(mergedTreeData, mergedFieldNames),\n      keyEntities = _useDataEntities.keyEntities,\n      valueEntities = _useDataEntities.valueEntities;\n  /** Get `missingRawValues` which not exist in the tree yet */\n\n\n  var splitRawValues = React.useCallback(function (newRawValues) {\n    var missingRawValues = [];\n    var existRawValues = []; // Keep missing value in the cache\n\n    newRawValues.forEach(function (val) {\n      if (valueEntities.has(val)) {\n        existRawValues.push(val);\n      } else {\n        missingRawValues.push(val);\n      }\n    });\n    return {\n      missingRawValues: missingRawValues,\n      existRawValues: existRawValues\n    };\n  }, [valueEntities]); // Filtered Tree\n\n  var filteredTreeData = useFilterTreeData(mergedTreeData, mergedSearchValue, {\n    fieldNames: mergedFieldNames,\n    treeNodeFilterProp: treeNodeFilterProp,\n    filterTreeNode: filterTreeNode\n  }); // =========================== Label ============================\n\n  var getLabel = React.useCallback(function (item) {\n    if (item) {\n      if (treeNodeLabelProp) {\n        return item[treeNodeLabelProp];\n      } // Loop from fieldNames\n\n\n      var titleList = mergedFieldNames._title;\n\n      for (var i = 0; i < titleList.length; i += 1) {\n        var title = item[titleList[i]];\n\n        if (title !== undefined) {\n          return title;\n        }\n      }\n    }\n  }, [mergedFieldNames, treeNodeLabelProp]); // ========================= Wrap Value =========================\n\n  var toLabeledValues = React.useCallback(function (draftValues) {\n    var values = toArray(draftValues);\n    return values.map(function (val) {\n      if (isRawValue(val)) {\n        return {\n          value: val\n        };\n      }\n\n      return val;\n    });\n  }, []);\n  var convert2LabelValues = React.useCallback(function (draftValues) {\n    var values = toLabeledValues(draftValues);\n    return values.map(function (item) {\n      var rawLabel = item.label;\n      var rawValue = item.value,\n          rawHalfChecked = item.halfChecked;\n      var rawDisabled;\n      var entity = valueEntities.get(rawValue); // Fill missing label & status\n\n      if (entity) {\n        var _rawLabel;\n\n        rawLabel = treeTitleRender ? treeTitleRender(entity.node) : (_rawLabel = rawLabel) !== null && _rawLabel !== void 0 ? _rawLabel : getLabel(entity.node);\n        rawDisabled = entity.node.disabled;\n      } else if (rawLabel === undefined) {\n        // We try to find in current `labelInValue` value\n        var labelInValueItem = toLabeledValues(internalValue).find(function (labeledItem) {\n          return labeledItem.value === rawValue;\n        });\n        rawLabel = labelInValueItem.label;\n      }\n\n      return {\n        label: rawLabel,\n        value: rawValue,\n        halfChecked: rawHalfChecked,\n        disabled: rawDisabled\n      };\n    });\n  }, [valueEntities, getLabel, toLabeledValues, internalValue]); // =========================== Values ===========================\n\n  var rawMixedLabeledValues = React.useMemo(function () {\n    return toLabeledValues(internalValue === null ? [] : internalValue);\n  }, [toLabeledValues, internalValue]); // Split value into full check and half check\n\n  var _React$useMemo = React.useMemo(function () {\n    var fullCheckValues = [];\n    var halfCheckValues = [];\n    rawMixedLabeledValues.forEach(function (item) {\n      if (item.halfChecked) {\n        halfCheckValues.push(item);\n      } else {\n        fullCheckValues.push(item);\n      }\n    });\n    return [fullCheckValues, halfCheckValues];\n  }, [rawMixedLabeledValues]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\n      rawLabeledValues = _React$useMemo2[0],\n      rawHalfLabeledValues = _React$useMemo2[1]; // const [mergedValues] = useCache(rawLabeledValues);\n\n\n  var rawValues = React.useMemo(function () {\n    return rawLabeledValues.map(function (item) {\n      return item.value;\n    });\n  }, [rawLabeledValues]); // Convert value to key. Will fill missed keys for conduct check.\n\n  var _useCheckedKeys = useCheckedKeys(rawLabeledValues, rawHalfLabeledValues, treeConduction, keyEntities),\n      _useCheckedKeys2 = _slicedToArray(_useCheckedKeys, 2),\n      rawCheckedValues = _useCheckedKeys2[0],\n      rawHalfCheckedValues = _useCheckedKeys2[1]; // Convert rawCheckedKeys to check strategy related values\n\n\n  var displayValues = React.useMemo(function () {\n    // Collect keys which need to show\n    var displayKeys = formatStrategyValues(rawCheckedValues, mergedShowCheckedStrategy, keyEntities, mergedFieldNames); // Convert to value and filled with label\n\n    var values = displayKeys.map(function (key) {\n      var _keyEntities$key$node, _keyEntities$key;\n\n      return (_keyEntities$key$node = (_keyEntities$key = keyEntities[key]) === null || _keyEntities$key === void 0 || (_keyEntities$key = _keyEntities$key.node) === null || _keyEntities$key === void 0 ? void 0 : _keyEntities$key[mergedFieldNames.value]) !== null && _keyEntities$key$node !== void 0 ? _keyEntities$key$node : key;\n    }); // Back fill with origin label\n\n    var labeledValues = values.map(function (val) {\n      var targetItem = rawLabeledValues.find(function (item) {\n        return item.value === val;\n      });\n      var label = labelInValue ? targetItem === null || targetItem === void 0 ? void 0 : targetItem.label : treeTitleRender === null || treeTitleRender === void 0 ? void 0 : treeTitleRender(targetItem);\n      return {\n        value: val,\n        label: label\n      };\n    });\n    var rawDisplayValues = convert2LabelValues(labeledValues);\n    var firstVal = rawDisplayValues[0];\n\n    if (!mergedMultiple && firstVal && isNil(firstVal.value) && isNil(firstVal.label)) {\n      return [];\n    }\n\n    return rawDisplayValues.map(function (item) {\n      var _item$label;\n\n      return _objectSpread(_objectSpread({}, item), {}, {\n        label: (_item$label = item.label) !== null && _item$label !== void 0 ? _item$label : item.value\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mergedFieldNames, mergedMultiple, rawCheckedValues, rawLabeledValues, convert2LabelValues, mergedShowCheckedStrategy, keyEntities]);\n\n  var _useCache = useCache(displayValues),\n      _useCache2 = _slicedToArray(_useCache, 1),\n      cachedDisplayValues = _useCache2[0]; // ========================== MaxCount ==========================\n\n\n  var mergedMaxCount = React.useMemo(function () {\n    if (mergedMultiple && (mergedShowCheckedStrategy === 'SHOW_CHILD' || treeCheckStrictly || !treeCheckable)) {\n      return maxCount;\n    }\n\n    return null;\n  }, [maxCount, mergedMultiple, treeCheckStrictly, mergedShowCheckedStrategy, treeCheckable]); // =========================== Change ===========================\n\n  var triggerChange = useRefFunc(function (newRawValues, extra, source) {\n    var formattedKeyList = formatStrategyValues(newRawValues, mergedShowCheckedStrategy, keyEntities, mergedFieldNames); // Not allow pass with `maxCount`\n\n    if (mergedMaxCount && formattedKeyList.length > mergedMaxCount) {\n      return;\n    }\n\n    var labeledValues = convert2LabelValues(newRawValues);\n    setInternalValue(labeledValues); // Clean up if needed\n\n    if (autoClearSearchValue) {\n      setSearchValue('');\n    } // Generate rest parameters is costly, so only do it when necessary\n\n\n    if (onChange) {\n      var eventValues = newRawValues;\n\n      if (treeConduction) {\n        eventValues = formattedKeyList.map(function (key) {\n          var entity = valueEntities.get(key);\n          return entity ? entity.node[mergedFieldNames.value] : key;\n        });\n      }\n\n      var _ref = extra || {\n        triggerValue: undefined,\n        selected: undefined\n      },\n          triggerValue = _ref.triggerValue,\n          selected = _ref.selected;\n\n      var returnRawValues = eventValues; // We need fill half check back\n\n      if (treeCheckStrictly) {\n        var halfValues = rawHalfLabeledValues.filter(function (item) {\n          return !eventValues.includes(item.value);\n        });\n        returnRawValues = [].concat(_toConsumableArray(returnRawValues), _toConsumableArray(halfValues));\n      }\n\n      var returnLabeledValues = convert2LabelValues(returnRawValues);\n      var additionalInfo = {\n        // [Legacy] Always return as array contains label & value\n        preValue: rawLabeledValues,\n        triggerValue: triggerValue\n      }; // [Legacy] Fill legacy data if user query.\n      // This is expansive that we only fill when user query\n      // https://github.com/react-component/tree-select/blob/fe33eb7c27830c9ac70cd1fdb1ebbe7bc679c16a/src/Select.jsx\n\n      var showPosition = true;\n\n      if (treeCheckStrictly || source === 'selection' && !selected) {\n        showPosition = false;\n      }\n\n      fillAdditionalInfo(additionalInfo, triggerValue, newRawValues, mergedTreeData, showPosition, mergedFieldNames);\n\n      if (mergedCheckable) {\n        additionalInfo.checked = selected;\n      } else {\n        additionalInfo.selected = selected;\n      }\n\n      var returnValues = mergedLabelInValue ? returnLabeledValues : returnLabeledValues.map(function (item) {\n        return item.value;\n      });\n      onChange(mergedMultiple ? returnValues : returnValues[0], mergedLabelInValue ? null : returnLabeledValues.map(function (item) {\n        return item.label;\n      }), additionalInfo);\n    }\n  }); // ========================== Options ===========================\n\n  /** Trigger by option list */\n\n  var onOptionSelect = React.useCallback(function (selectedKey, _ref2) {\n    var _node$mergedFieldName;\n\n    var selected = _ref2.selected,\n        source = _ref2.source;\n    var entity = keyEntities[selectedKey];\n    var node = entity === null || entity === void 0 ? void 0 : entity.node;\n    var selectedValue = (_node$mergedFieldName = node === null || node === void 0 ? void 0 : node[mergedFieldNames.value]) !== null && _node$mergedFieldName !== void 0 ? _node$mergedFieldName : selectedKey; // Never be falsy but keep it safe\n\n    if (!mergedMultiple) {\n      // Single mode always set value\n      triggerChange([selectedValue], {\n        selected: true,\n        triggerValue: selectedValue\n      }, 'option');\n    } else {\n      var newRawValues = selected ? [].concat(_toConsumableArray(rawValues), [selectedValue]) : rawCheckedValues.filter(function (v) {\n        return v !== selectedValue;\n      }); // Add keys if tree conduction\n\n      if (treeConduction) {\n        // Should keep missing values\n        var _splitRawValues = splitRawValues(newRawValues),\n            missingRawValues = _splitRawValues.missingRawValues,\n            existRawValues = _splitRawValues.existRawValues;\n\n        var keyList = existRawValues.map(function (val) {\n          return valueEntities.get(val).key;\n        }); // Conduction by selected or not\n\n        var checkedKeys;\n\n        if (selected) {\n          var _conductCheck = conductCheck(keyList, true, keyEntities);\n\n          checkedKeys = _conductCheck.checkedKeys;\n        } else {\n          var _conductCheck2 = conductCheck(keyList, {\n            checked: false,\n            halfCheckedKeys: rawHalfCheckedValues\n          }, keyEntities);\n\n          checkedKeys = _conductCheck2.checkedKeys;\n        } // Fill back of keys\n\n\n        newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return keyEntities[key].node[mergedFieldNames.value];\n        })));\n      }\n\n      triggerChange(newRawValues, {\n        selected: selected,\n        triggerValue: selectedValue\n      }, source || 'option');\n    } // Trigger select event\n\n\n    if (selected || !mergedMultiple) {\n      onSelect === null || onSelect === void 0 || onSelect(selectedValue, fillLegacyProps(node));\n    } else {\n      onDeselect === null || onDeselect === void 0 || onDeselect(selectedValue, fillLegacyProps(node));\n    }\n  }, [splitRawValues, valueEntities, keyEntities, mergedFieldNames, mergedMultiple, rawValues, triggerChange, treeConduction, onSelect, onDeselect, rawCheckedValues, rawHalfCheckedValues, maxCount]); // ========================== Dropdown ==========================\n\n  var onInternalDropdownVisibleChange = React.useCallback(function (open) {\n    if (onDropdownVisibleChange) {\n      var legacyParam = {};\n      Object.defineProperty(legacyParam, 'documentClickClose', {\n        get: function get() {\n          warning(false, 'Second param of `onDropdownVisibleChange` has been removed.');\n          return false;\n        }\n      });\n      onDropdownVisibleChange(open, legacyParam);\n    }\n  }, [onDropdownVisibleChange]); // ====================== Display Change ========================\n\n  var onDisplayValuesChange = useRefFunc(function (newValues, info) {\n    var newRawValues = newValues.map(function (item) {\n      return item.value;\n    });\n\n    if (info.type === 'clear') {\n      triggerChange(newRawValues, {}, 'selection');\n      return;\n    } // TreeSelect only have multiple mode which means display change only has remove\n\n\n    if (info.values.length) {\n      onOptionSelect(info.values[0].value, {\n        selected: false,\n        source: 'selection'\n      });\n    }\n  }); // ========================== Context ===========================\n\n  var treeSelectContext = React.useMemo(function () {\n    return {\n      virtual: virtual,\n      dropdownMatchSelectWidth: dropdownMatchSelectWidth,\n      listHeight: listHeight,\n      listItemHeight: listItemHeight,\n      listItemScrollOffset: listItemScrollOffset,\n      treeData: filteredTreeData,\n      fieldNames: mergedFieldNames,\n      onSelect: onOptionSelect,\n      treeExpandAction: treeExpandAction,\n      treeTitleRender: treeTitleRender,\n      onPopupScroll: onPopupScroll,\n      leftMaxCount: maxCount === undefined ? null : maxCount - cachedDisplayValues.length,\n      leafCountOnly: mergedShowCheckedStrategy === 'SHOW_CHILD' && !treeCheckStrictly && !!treeCheckable,\n      valueEntities: valueEntities\n    };\n  }, [virtual, dropdownMatchSelectWidth, listHeight, listItemHeight, listItemScrollOffset, filteredTreeData, mergedFieldNames, onOptionSelect, treeExpandAction, treeTitleRender, onPopupScroll, maxCount, cachedDisplayValues.length, mergedShowCheckedStrategy, treeCheckStrictly, treeCheckable, valueEntities]); // ======================= Legacy Context =======================\n\n  var legacyContext = React.useMemo(function () {\n    return {\n      checkable: mergedCheckable,\n      loadData: loadData,\n      treeLoadedKeys: treeLoadedKeys,\n      onTreeLoad: onTreeLoad,\n      checkedKeys: rawCheckedValues,\n      halfCheckedKeys: rawHalfCheckedValues,\n      treeDefaultExpandAll: treeDefaultExpandAll,\n      treeExpandedKeys: treeExpandedKeys,\n      treeDefaultExpandedKeys: treeDefaultExpandedKeys,\n      onTreeExpand: onTreeExpand,\n      treeIcon: treeIcon,\n      treeMotion: treeMotion,\n      showTreeIcon: showTreeIcon,\n      switcherIcon: switcherIcon,\n      treeLine: treeLine,\n      treeNodeFilterProp: treeNodeFilterProp,\n      keyEntities: keyEntities\n    };\n  }, [mergedCheckable, loadData, treeLoadedKeys, onTreeLoad, rawCheckedValues, rawHalfCheckedValues, treeDefaultExpandAll, treeExpandedKeys, treeDefaultExpandedKeys, onTreeExpand, treeIcon, treeMotion, showTreeIcon, switcherIcon, treeLine, treeNodeFilterProp, keyEntities]); // =========================== Render ===========================\n\n  return /*#__PURE__*/React.createElement(TreeSelectContext.Provider, {\n    value: treeSelectContext\n  }, /*#__PURE__*/React.createElement(LegacyContext.Provider, {\n    value: legacyContext\n  }, /*#__PURE__*/React.createElement(BaseSelect, _extends({\n    ref: ref\n  }, restProps, {\n    // >>> MISC\n    id: mergedId,\n    prefixCls: prefixCls,\n    mode: mergedMultiple ? 'multiple' : undefined // >>> Display Value\n    ,\n    displayValues: cachedDisplayValues,\n    onDisplayValuesChange: onDisplayValuesChange // >>> Search\n    ,\n    searchValue: mergedSearchValue,\n    onSearch: onInternalSearch // >>> Options\n    ,\n    OptionList: OptionList,\n    emptyOptions: !mergedTreeData.length,\n    onDropdownVisibleChange: onInternalDropdownVisibleChange,\n    dropdownMatchSelectWidth: dropdownMatchSelectWidth\n  }))));\n}); // Assign name for Debug\n\nif (process.env.NODE_ENV !== 'production') {\n  TreeSelect.displayName = 'TreeSelect';\n}\n\nvar GenericTreeSelect = TreeSelect;\nGenericTreeSelect.TreeNode = TreeNode;\nGenericTreeSelect.SHOW_ALL = SHOW_ALL;\nGenericTreeSelect.SHOW_PARENT = SHOW_PARENT;\nGenericTreeSelect.SHOW_CHILD = SHOW_CHILD;\nexport default GenericTreeSelect;","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-tree-select/es/TreeSelect.js"],"names":["_extends","_toConsumableArray","_objectSpread","_slicedToArray","_objectWithoutProperties","_typeof","_excluded","BaseSelect","useId","conductCheck","useMergedState","warning","React","useCache","useCheckedKeys","useDataEntities","useFilterTreeData","useRefFunc","useTreeData","LegacyContext","OptionList","TreeNode","TreeSelectContext","fillAdditionalInfo","fillLegacyProps","formatStrategyValues","SHOW_ALL","SHOW_CHILD","SHOW_PARENT","fillFieldNames","isNil","toArray","warningProps","isRawValue","value","TreeSelect","forwardRef","props","ref","id","_props$prefixCls","prefixCls","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","_props$autoClearSearc","autoClearSearchValue","filterTreeNode","_props$treeNodeFilter","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","_props$listHeight","listHeight","_props$listItemHeight","listItemHeight","_props$listItemScroll","listItemScrollOffset","onDropdownVisibleChange","_props$dropdownMatchS","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll","restProps","mergedId","treeConduction","mergedCheckable","mergedLabelInValue","mergedMultiple","_useMergedState","_useMergedState2","internalValue","setInternalValue","mergedShowCheckedStrategy","useMemo","process","env","NODE_ENV","mergedFieldNames","JSON","stringify","_useMergedState3","undefined","postState","search","_useMergedState4","mergedSearchValue","setSearchValue","onInternalSearch","searchText","mergedTreeData","_useDataEntities","keyEntities","valueEntities","splitRawValues","useCallback","newRawValues","missingRawValues","existRawValues","forEach","val","has","push","filteredTreeData","getLabel","item","titleList","_title","i","length","title","toLabeledValues","draftValues","values","map","convert2LabelValues","rawLabel","label","rawValue","rawHalfChecked","halfChecked","rawDisabled","entity","get","_rawLabel","node","disabled","labelInValueItem","find","labeledItem","rawMixedLabeledValues","_React$useMemo","fullCheckValues","halfCheckValues","_React$useMemo2","rawLabeledValues","rawHalfLabeledValues","rawValues","_useCheckedKeys","_useCheckedKeys2","rawCheckedValues","rawHalfCheckedValues","displayValues","displayKeys","key","_keyEntities$key$node","_keyEntities$key","labeledValues","targetItem","rawDisplayValues","firstVal","_item$label","_useCache","_useCache2","cachedDisplayValues","mergedMaxCount","triggerChange","extra","source","formattedKeyList","eventValues","_ref","triggerValue","selected","returnRawValues","halfValues","filter","includes","concat","returnLabeledValues","additionalInfo","preValue","showPosition","checked","returnValues","onOptionSelect","selectedKey","_ref2","_node$mergedFieldName","selectedValue","v","_splitRawValues","keyList","checkedKeys","_conductCheck","_conductCheck2","halfCheckedKeys","onInternalDropdownVisibleChange","open","legacyParam","Object","defineProperty","onDisplayValuesChange","newValues","info","type","treeSelectContext","leftMaxCount","leafCountOnly","legacyContext","checkable","createElement","Provider","mode","emptyOptions","displayName","GenericTreeSelect"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar _excluded = [\"id\", \"prefixCls\", \"value\", \"defaultValue\", \"onChange\", \"onSelect\", \"onDeselect\", \"searchValue\", \"inputValue\", \"onSearch\", \"autoClearSearchValue\", \"filterTreeNode\", \"treeNodeFilterProp\", \"showCheckedStrategy\", \"treeNodeLabelProp\", \"multiple\", \"treeCheckable\", \"treeCheckStrictly\", \"labelInValue\", \"maxCount\", \"fieldNames\", \"treeDataSimpleMode\", \"treeData\", \"children\", \"loadData\", \"treeLoadedKeys\", \"onTreeLoad\", \"treeDefaultExpandAll\", \"treeExpandedKeys\", \"treeDefaultExpandedKeys\", \"onTreeExpand\", \"treeExpandAction\", \"virtual\", \"listHeight\", \"listItemHeight\", \"listItemScrollOffset\", \"onDropdownVisibleChange\", \"dropdownMatchSelectWidth\", \"treeLine\", \"treeIcon\", \"showTreeIcon\", \"switcherIcon\", \"treeMotion\", \"treeTitleRender\", \"onPopupScroll\"];\nimport { BaseSelect } from 'rc-select';\nimport useId from \"rc-select/es/hooks/useId\";\nimport { conductCheck } from \"rc-tree/es/utils/conductUtil\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport useCache from \"./hooks/useCache\";\nimport useCheckedKeys from \"./hooks/useCheckedKeys\";\nimport useDataEntities from \"./hooks/useDataEntities\";\nimport useFilterTreeData from \"./hooks/useFilterTreeData\";\nimport useRefFunc from \"./hooks/useRefFunc\";\nimport useTreeData from \"./hooks/useTreeData\";\nimport LegacyContext from \"./LegacyContext\";\nimport OptionList from \"./OptionList\";\nimport TreeNode from \"./TreeNode\";\nimport TreeSelectContext from \"./TreeSelectContext\";\nimport { fillAdditionalInfo, fillLegacyProps } from \"./utils/legacyUtil\";\nimport { formatStrategyValues, SHOW_ALL, SHOW_CHILD, SHOW_PARENT } from \"./utils/strategyUtil\";\nimport { fillFieldNames, isNil, toArray } from \"./utils/valueUtil\";\nimport warningProps from \"./utils/warningPropsUtil\";\nfunction isRawValue(value) {\n  return !value || _typeof(value) !== 'object';\n}\nvar TreeSelect = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n    _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-tree-select' : _props$prefixCls,\n    value = props.value,\n    defaultValue = props.defaultValue,\n    onChange = props.onChange,\n    onSelect = props.onSelect,\n    onDeselect = props.onDeselect,\n    searchValue = props.searchValue,\n    inputValue = props.inputValue,\n    onSearch = props.onSearch,\n    _props$autoClearSearc = props.autoClearSearchValue,\n    autoClearSearchValue = _props$autoClearSearc === void 0 ? true : _props$autoClearSearc,\n    filterTreeNode = props.filterTreeNode,\n    _props$treeNodeFilter = props.treeNodeFilterProp,\n    treeNodeFilterProp = _props$treeNodeFilter === void 0 ? 'value' : _props$treeNodeFilter,\n    showCheckedStrategy = props.showCheckedStrategy,\n    treeNodeLabelProp = props.treeNodeLabelProp,\n    multiple = props.multiple,\n    treeCheckable = props.treeCheckable,\n    treeCheckStrictly = props.treeCheckStrictly,\n    labelInValue = props.labelInValue,\n    maxCount = props.maxCount,\n    fieldNames = props.fieldNames,\n    treeDataSimpleMode = props.treeDataSimpleMode,\n    treeData = props.treeData,\n    children = props.children,\n    loadData = props.loadData,\n    treeLoadedKeys = props.treeLoadedKeys,\n    onTreeLoad = props.onTreeLoad,\n    treeDefaultExpandAll = props.treeDefaultExpandAll,\n    treeExpandedKeys = props.treeExpandedKeys,\n    treeDefaultExpandedKeys = props.treeDefaultExpandedKeys,\n    onTreeExpand = props.onTreeExpand,\n    treeExpandAction = props.treeExpandAction,\n    virtual = props.virtual,\n    _props$listHeight = props.listHeight,\n    listHeight = _props$listHeight === void 0 ? 200 : _props$listHeight,\n    _props$listItemHeight = props.listItemHeight,\n    listItemHeight = _props$listItemHeight === void 0 ? 20 : _props$listItemHeight,\n    _props$listItemScroll = props.listItemScrollOffset,\n    listItemScrollOffset = _props$listItemScroll === void 0 ? 0 : _props$listItemScroll,\n    onDropdownVisibleChange = props.onDropdownVisibleChange,\n    _props$dropdownMatchS = props.dropdownMatchSelectWidth,\n    dropdownMatchSelectWidth = _props$dropdownMatchS === void 0 ? true : _props$dropdownMatchS,\n    treeLine = props.treeLine,\n    treeIcon = props.treeIcon,\n    showTreeIcon = props.showTreeIcon,\n    switcherIcon = props.switcherIcon,\n    treeMotion = props.treeMotion,\n    treeTitleRender = props.treeTitleRender,\n    onPopupScroll = props.onPopupScroll,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var mergedId = useId(id);\n  var treeConduction = treeCheckable && !treeCheckStrictly;\n  var mergedCheckable = treeCheckable || treeCheckStrictly;\n  var mergedLabelInValue = treeCheckStrictly || labelInValue;\n  var mergedMultiple = mergedCheckable || multiple;\n  var _useMergedState = useMergedState(defaultValue, {\n      value: value\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    internalValue = _useMergedState2[0],\n    setInternalValue = _useMergedState2[1];\n\n  // `multiple` && `!treeCheckable` should be show all\n  var mergedShowCheckedStrategy = React.useMemo(function () {\n    if (!treeCheckable) {\n      return SHOW_ALL;\n    }\n    return showCheckedStrategy || SHOW_CHILD;\n  }, [showCheckedStrategy, treeCheckable]);\n\n  // ========================== Warning ===========================\n  if (process.env.NODE_ENV !== 'production') {\n    warningProps(props);\n  }\n\n  // ========================= FieldNames =========================\n  var mergedFieldNames = React.useMemo(function () {\n    return fillFieldNames(fieldNames);\n  }, /* eslint-disable react-hooks/exhaustive-deps */\n  [JSON.stringify(fieldNames)]\n  /* eslint-enable react-hooks/exhaustive-deps */);\n\n  // =========================== Search ===========================\n  var _useMergedState3 = useMergedState('', {\n      value: searchValue !== undefined ? searchValue : inputValue,\n      postState: function postState(search) {\n        return search || '';\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedSearchValue = _useMergedState4[0],\n    setSearchValue = _useMergedState4[1];\n  var onInternalSearch = function onInternalSearch(searchText) {\n    setSearchValue(searchText);\n    onSearch === null || onSearch === void 0 || onSearch(searchText);\n  };\n\n  // ============================ Data ============================\n  // `useTreeData` only do convert of `children` or `simpleMode`.\n  // Else will return origin `treeData` for perf consideration.\n  // Do not do anything to loop the data.\n  var mergedTreeData = useTreeData(treeData, children, treeDataSimpleMode);\n  var _useDataEntities = useDataEntities(mergedTreeData, mergedFieldNames),\n    keyEntities = _useDataEntities.keyEntities,\n    valueEntities = _useDataEntities.valueEntities;\n\n  /** Get `missingRawValues` which not exist in the tree yet */\n  var splitRawValues = React.useCallback(function (newRawValues) {\n    var missingRawValues = [];\n    var existRawValues = [];\n\n    // Keep missing value in the cache\n    newRawValues.forEach(function (val) {\n      if (valueEntities.has(val)) {\n        existRawValues.push(val);\n      } else {\n        missingRawValues.push(val);\n      }\n    });\n    return {\n      missingRawValues: missingRawValues,\n      existRawValues: existRawValues\n    };\n  }, [valueEntities]);\n\n  // Filtered Tree\n  var filteredTreeData = useFilterTreeData(mergedTreeData, mergedSearchValue, {\n    fieldNames: mergedFieldNames,\n    treeNodeFilterProp: treeNodeFilterProp,\n    filterTreeNode: filterTreeNode\n  });\n\n  // =========================== Label ============================\n  var getLabel = React.useCallback(function (item) {\n    if (item) {\n      if (treeNodeLabelProp) {\n        return item[treeNodeLabelProp];\n      }\n\n      // Loop from fieldNames\n      var titleList = mergedFieldNames._title;\n      for (var i = 0; i < titleList.length; i += 1) {\n        var title = item[titleList[i]];\n        if (title !== undefined) {\n          return title;\n        }\n      }\n    }\n  }, [mergedFieldNames, treeNodeLabelProp]);\n\n  // ========================= Wrap Value =========================\n  var toLabeledValues = React.useCallback(function (draftValues) {\n    var values = toArray(draftValues);\n    return values.map(function (val) {\n      if (isRawValue(val)) {\n        return {\n          value: val\n        };\n      }\n      return val;\n    });\n  }, []);\n  var convert2LabelValues = React.useCallback(function (draftValues) {\n    var values = toLabeledValues(draftValues);\n    return values.map(function (item) {\n      var rawLabel = item.label;\n      var rawValue = item.value,\n        rawHalfChecked = item.halfChecked;\n      var rawDisabled;\n      var entity = valueEntities.get(rawValue);\n\n      // Fill missing label & status\n      if (entity) {\n        var _rawLabel;\n        rawLabel = treeTitleRender ? treeTitleRender(entity.node) : (_rawLabel = rawLabel) !== null && _rawLabel !== void 0 ? _rawLabel : getLabel(entity.node);\n        rawDisabled = entity.node.disabled;\n      } else if (rawLabel === undefined) {\n        // We try to find in current `labelInValue` value\n        var labelInValueItem = toLabeledValues(internalValue).find(function (labeledItem) {\n          return labeledItem.value === rawValue;\n        });\n        rawLabel = labelInValueItem.label;\n      }\n      return {\n        label: rawLabel,\n        value: rawValue,\n        halfChecked: rawHalfChecked,\n        disabled: rawDisabled\n      };\n    });\n  }, [valueEntities, getLabel, toLabeledValues, internalValue]);\n\n  // =========================== Values ===========================\n  var rawMixedLabeledValues = React.useMemo(function () {\n    return toLabeledValues(internalValue === null ? [] : internalValue);\n  }, [toLabeledValues, internalValue]);\n\n  // Split value into full check and half check\n  var _React$useMemo = React.useMemo(function () {\n      var fullCheckValues = [];\n      var halfCheckValues = [];\n      rawMixedLabeledValues.forEach(function (item) {\n        if (item.halfChecked) {\n          halfCheckValues.push(item);\n        } else {\n          fullCheckValues.push(item);\n        }\n      });\n      return [fullCheckValues, halfCheckValues];\n    }, [rawMixedLabeledValues]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 2),\n    rawLabeledValues = _React$useMemo2[0],\n    rawHalfLabeledValues = _React$useMemo2[1];\n\n  // const [mergedValues] = useCache(rawLabeledValues);\n  var rawValues = React.useMemo(function () {\n    return rawLabeledValues.map(function (item) {\n      return item.value;\n    });\n  }, [rawLabeledValues]);\n\n  // Convert value to key. Will fill missed keys for conduct check.\n  var _useCheckedKeys = useCheckedKeys(rawLabeledValues, rawHalfLabeledValues, treeConduction, keyEntities),\n    _useCheckedKeys2 = _slicedToArray(_useCheckedKeys, 2),\n    rawCheckedValues = _useCheckedKeys2[0],\n    rawHalfCheckedValues = _useCheckedKeys2[1];\n\n  // Convert rawCheckedKeys to check strategy related values\n  var displayValues = React.useMemo(function () {\n    // Collect keys which need to show\n    var displayKeys = formatStrategyValues(rawCheckedValues, mergedShowCheckedStrategy, keyEntities, mergedFieldNames);\n\n    // Convert to value and filled with label\n    var values = displayKeys.map(function (key) {\n      var _keyEntities$key$node, _keyEntities$key;\n      return (_keyEntities$key$node = (_keyEntities$key = keyEntities[key]) === null || _keyEntities$key === void 0 || (_keyEntities$key = _keyEntities$key.node) === null || _keyEntities$key === void 0 ? void 0 : _keyEntities$key[mergedFieldNames.value]) !== null && _keyEntities$key$node !== void 0 ? _keyEntities$key$node : key;\n    });\n\n    // Back fill with origin label\n    var labeledValues = values.map(function (val) {\n      var targetItem = rawLabeledValues.find(function (item) {\n        return item.value === val;\n      });\n      var label = labelInValue ? targetItem === null || targetItem === void 0 ? void 0 : targetItem.label : treeTitleRender === null || treeTitleRender === void 0 ? void 0 : treeTitleRender(targetItem);\n      return {\n        value: val,\n        label: label\n      };\n    });\n    var rawDisplayValues = convert2LabelValues(labeledValues);\n    var firstVal = rawDisplayValues[0];\n    if (!mergedMultiple && firstVal && isNil(firstVal.value) && isNil(firstVal.label)) {\n      return [];\n    }\n    return rawDisplayValues.map(function (item) {\n      var _item$label;\n      return _objectSpread(_objectSpread({}, item), {}, {\n        label: (_item$label = item.label) !== null && _item$label !== void 0 ? _item$label : item.value\n      });\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mergedFieldNames, mergedMultiple, rawCheckedValues, rawLabeledValues, convert2LabelValues, mergedShowCheckedStrategy, keyEntities]);\n  var _useCache = useCache(displayValues),\n    _useCache2 = _slicedToArray(_useCache, 1),\n    cachedDisplayValues = _useCache2[0];\n\n  // ========================== MaxCount ==========================\n  var mergedMaxCount = React.useMemo(function () {\n    if (mergedMultiple && (mergedShowCheckedStrategy === 'SHOW_CHILD' || treeCheckStrictly || !treeCheckable)) {\n      return maxCount;\n    }\n    return null;\n  }, [maxCount, mergedMultiple, treeCheckStrictly, mergedShowCheckedStrategy, treeCheckable]);\n\n  // =========================== Change ===========================\n  var triggerChange = useRefFunc(function (newRawValues, extra, source) {\n    var formattedKeyList = formatStrategyValues(newRawValues, mergedShowCheckedStrategy, keyEntities, mergedFieldNames);\n\n    // Not allow pass with `maxCount`\n    if (mergedMaxCount && formattedKeyList.length > mergedMaxCount) {\n      return;\n    }\n    var labeledValues = convert2LabelValues(newRawValues);\n    setInternalValue(labeledValues);\n\n    // Clean up if needed\n    if (autoClearSearchValue) {\n      setSearchValue('');\n    }\n\n    // Generate rest parameters is costly, so only do it when necessary\n    if (onChange) {\n      var eventValues = newRawValues;\n      if (treeConduction) {\n        eventValues = formattedKeyList.map(function (key) {\n          var entity = valueEntities.get(key);\n          return entity ? entity.node[mergedFieldNames.value] : key;\n        });\n      }\n      var _ref = extra || {\n          triggerValue: undefined,\n          selected: undefined\n        },\n        triggerValue = _ref.triggerValue,\n        selected = _ref.selected;\n      var returnRawValues = eventValues;\n\n      // We need fill half check back\n      if (treeCheckStrictly) {\n        var halfValues = rawHalfLabeledValues.filter(function (item) {\n          return !eventValues.includes(item.value);\n        });\n        returnRawValues = [].concat(_toConsumableArray(returnRawValues), _toConsumableArray(halfValues));\n      }\n      var returnLabeledValues = convert2LabelValues(returnRawValues);\n      var additionalInfo = {\n        // [Legacy] Always return as array contains label & value\n        preValue: rawLabeledValues,\n        triggerValue: triggerValue\n      };\n\n      // [Legacy] Fill legacy data if user query.\n      // This is expansive that we only fill when user query\n      // https://github.com/react-component/tree-select/blob/fe33eb7c27830c9ac70cd1fdb1ebbe7bc679c16a/src/Select.jsx\n      var showPosition = true;\n      if (treeCheckStrictly || source === 'selection' && !selected) {\n        showPosition = false;\n      }\n      fillAdditionalInfo(additionalInfo, triggerValue, newRawValues, mergedTreeData, showPosition, mergedFieldNames);\n      if (mergedCheckable) {\n        additionalInfo.checked = selected;\n      } else {\n        additionalInfo.selected = selected;\n      }\n      var returnValues = mergedLabelInValue ? returnLabeledValues : returnLabeledValues.map(function (item) {\n        return item.value;\n      });\n      onChange(mergedMultiple ? returnValues : returnValues[0], mergedLabelInValue ? null : returnLabeledValues.map(function (item) {\n        return item.label;\n      }), additionalInfo);\n    }\n  });\n\n  // ========================== Options ===========================\n  /** Trigger by option list */\n  var onOptionSelect = React.useCallback(function (selectedKey, _ref2) {\n    var _node$mergedFieldName;\n    var selected = _ref2.selected,\n      source = _ref2.source;\n    var entity = keyEntities[selectedKey];\n    var node = entity === null || entity === void 0 ? void 0 : entity.node;\n    var selectedValue = (_node$mergedFieldName = node === null || node === void 0 ? void 0 : node[mergedFieldNames.value]) !== null && _node$mergedFieldName !== void 0 ? _node$mergedFieldName : selectedKey;\n\n    // Never be falsy but keep it safe\n    if (!mergedMultiple) {\n      // Single mode always set value\n      triggerChange([selectedValue], {\n        selected: true,\n        triggerValue: selectedValue\n      }, 'option');\n    } else {\n      var newRawValues = selected ? [].concat(_toConsumableArray(rawValues), [selectedValue]) : rawCheckedValues.filter(function (v) {\n        return v !== selectedValue;\n      });\n\n      // Add keys if tree conduction\n      if (treeConduction) {\n        // Should keep missing values\n        var _splitRawValues = splitRawValues(newRawValues),\n          missingRawValues = _splitRawValues.missingRawValues,\n          existRawValues = _splitRawValues.existRawValues;\n        var keyList = existRawValues.map(function (val) {\n          return valueEntities.get(val).key;\n        });\n\n        // Conduction by selected or not\n        var checkedKeys;\n        if (selected) {\n          var _conductCheck = conductCheck(keyList, true, keyEntities);\n          checkedKeys = _conductCheck.checkedKeys;\n        } else {\n          var _conductCheck2 = conductCheck(keyList, {\n            checked: false,\n            halfCheckedKeys: rawHalfCheckedValues\n          }, keyEntities);\n          checkedKeys = _conductCheck2.checkedKeys;\n        }\n\n        // Fill back of keys\n        newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return keyEntities[key].node[mergedFieldNames.value];\n        })));\n      }\n      triggerChange(newRawValues, {\n        selected: selected,\n        triggerValue: selectedValue\n      }, source || 'option');\n    }\n\n    // Trigger select event\n    if (selected || !mergedMultiple) {\n      onSelect === null || onSelect === void 0 || onSelect(selectedValue, fillLegacyProps(node));\n    } else {\n      onDeselect === null || onDeselect === void 0 || onDeselect(selectedValue, fillLegacyProps(node));\n    }\n  }, [splitRawValues, valueEntities, keyEntities, mergedFieldNames, mergedMultiple, rawValues, triggerChange, treeConduction, onSelect, onDeselect, rawCheckedValues, rawHalfCheckedValues, maxCount]);\n\n  // ========================== Dropdown ==========================\n  var onInternalDropdownVisibleChange = React.useCallback(function (open) {\n    if (onDropdownVisibleChange) {\n      var legacyParam = {};\n      Object.defineProperty(legacyParam, 'documentClickClose', {\n        get: function get() {\n          warning(false, 'Second param of `onDropdownVisibleChange` has been removed.');\n          return false;\n        }\n      });\n      onDropdownVisibleChange(open, legacyParam);\n    }\n  }, [onDropdownVisibleChange]);\n\n  // ====================== Display Change ========================\n  var onDisplayValuesChange = useRefFunc(function (newValues, info) {\n    var newRawValues = newValues.map(function (item) {\n      return item.value;\n    });\n    if (info.type === 'clear') {\n      triggerChange(newRawValues, {}, 'selection');\n      return;\n    }\n\n    // TreeSelect only have multiple mode which means display change only has remove\n    if (info.values.length) {\n      onOptionSelect(info.values[0].value, {\n        selected: false,\n        source: 'selection'\n      });\n    }\n  });\n\n  // ========================== Context ===========================\n  var treeSelectContext = React.useMemo(function () {\n    return {\n      virtual: virtual,\n      dropdownMatchSelectWidth: dropdownMatchSelectWidth,\n      listHeight: listHeight,\n      listItemHeight: listItemHeight,\n      listItemScrollOffset: listItemScrollOffset,\n      treeData: filteredTreeData,\n      fieldNames: mergedFieldNames,\n      onSelect: onOptionSelect,\n      treeExpandAction: treeExpandAction,\n      treeTitleRender: treeTitleRender,\n      onPopupScroll: onPopupScroll,\n      leftMaxCount: maxCount === undefined ? null : maxCount - cachedDisplayValues.length,\n      leafCountOnly: mergedShowCheckedStrategy === 'SHOW_CHILD' && !treeCheckStrictly && !!treeCheckable,\n      valueEntities: valueEntities\n    };\n  }, [virtual, dropdownMatchSelectWidth, listHeight, listItemHeight, listItemScrollOffset, filteredTreeData, mergedFieldNames, onOptionSelect, treeExpandAction, treeTitleRender, onPopupScroll, maxCount, cachedDisplayValues.length, mergedShowCheckedStrategy, treeCheckStrictly, treeCheckable, valueEntities]);\n\n  // ======================= Legacy Context =======================\n  var legacyContext = React.useMemo(function () {\n    return {\n      checkable: mergedCheckable,\n      loadData: loadData,\n      treeLoadedKeys: treeLoadedKeys,\n      onTreeLoad: onTreeLoad,\n      checkedKeys: rawCheckedValues,\n      halfCheckedKeys: rawHalfCheckedValues,\n      treeDefaultExpandAll: treeDefaultExpandAll,\n      treeExpandedKeys: treeExpandedKeys,\n      treeDefaultExpandedKeys: treeDefaultExpandedKeys,\n      onTreeExpand: onTreeExpand,\n      treeIcon: treeIcon,\n      treeMotion: treeMotion,\n      showTreeIcon: showTreeIcon,\n      switcherIcon: switcherIcon,\n      treeLine: treeLine,\n      treeNodeFilterProp: treeNodeFilterProp,\n      keyEntities: keyEntities\n    };\n  }, [mergedCheckable, loadData, treeLoadedKeys, onTreeLoad, rawCheckedValues, rawHalfCheckedValues, treeDefaultExpandAll, treeExpandedKeys, treeDefaultExpandedKeys, onTreeExpand, treeIcon, treeMotion, showTreeIcon, switcherIcon, treeLine, treeNodeFilterProp, keyEntities]);\n\n  // =========================== Render ===========================\n  return /*#__PURE__*/React.createElement(TreeSelectContext.Provider, {\n    value: treeSelectContext\n  }, /*#__PURE__*/React.createElement(LegacyContext.Provider, {\n    value: legacyContext\n  }, /*#__PURE__*/React.createElement(BaseSelect, _extends({\n    ref: ref\n  }, restProps, {\n    // >>> MISC\n    id: mergedId,\n    prefixCls: prefixCls,\n    mode: mergedMultiple ? 'multiple' : undefined\n    // >>> Display Value\n    ,\n    displayValues: cachedDisplayValues,\n    onDisplayValuesChange: onDisplayValuesChange\n    // >>> Search\n    ,\n    searchValue: mergedSearchValue,\n    onSearch: onInternalSearch\n    // >>> Options\n    ,\n    OptionList: OptionList,\n    emptyOptions: !mergedTreeData.length,\n    onDropdownVisibleChange: onInternalDropdownVisibleChange,\n    dropdownMatchSelectWidth: dropdownMatchSelectWidth\n  }))));\n});\n\n// Assign name for Debug\nif (process.env.NODE_ENV !== 'production') {\n  TreeSelect.displayName = 'TreeSelect';\n}\nvar GenericTreeSelect = TreeSelect;\nGenericTreeSelect.TreeNode = TreeNode;\nGenericTreeSelect.SHOW_ALL = SHOW_ALL;\nGenericTreeSelect.SHOW_PARENT = SHOW_PARENT;\nGenericTreeSelect.SHOW_CHILD = SHOW_CHILD;\nexport default GenericTreeSelect;"]},"metadata":{},"sourceType":"module"}