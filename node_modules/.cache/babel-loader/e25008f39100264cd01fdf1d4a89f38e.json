{"ast":null,"code":"import raf from \"rc-util/es/raf\";\nimport { useRef } from 'react';\nimport isFF from \"../utils/isFirefox\";\nimport useOriginScroll from \"./useOriginScroll\";\nexport default function useFrameWheel(inVirtual, isScrollAtTop, isScrollAtBottom, isScrollAtLeft, isScrollAtRight, horizontalScroll,\n/***\n * Return `true` when you need to prevent default event\n */\nonWheelDelta) {\n  var offsetRef = useRef(0);\n  var nextFrameRef = useRef(null); // Firefox patch\n\n  var wheelValueRef = useRef(null);\n  var isMouseScrollRef = useRef(false); // Scroll status sync\n\n  var originScroll = useOriginScroll(isScrollAtTop, isScrollAtBottom, isScrollAtLeft, isScrollAtRight);\n\n  function onWheelY(e, deltaY) {\n    raf.cancel(nextFrameRef.current); // Do nothing when scroll at the edge, Skip check when is in scroll\n\n    if (originScroll(false, deltaY)) return; // Skip if nest List has handled this event\n\n    var event = e;\n\n    if (!event._virtualHandled) {\n      event._virtualHandled = true;\n    } else {\n      return;\n    }\n\n    offsetRef.current += deltaY;\n    wheelValueRef.current = deltaY; // Proxy of scroll events\n\n    if (!isFF) {\n      event.preventDefault();\n    }\n\n    nextFrameRef.current = raf(function () {\n      // Patch a multiple for Firefox to fix wheel number too small\n      // ref: https://github.com/ant-design/ant-design/issues/26372#issuecomment-679460266\n      var patchMultiple = isMouseScrollRef.current ? 10 : 1;\n      onWheelDelta(offsetRef.current * patchMultiple, false);\n      offsetRef.current = 0;\n    });\n  }\n\n  function onWheelX(event, deltaX) {\n    onWheelDelta(deltaX, true);\n\n    if (!isFF) {\n      event.preventDefault();\n    }\n  } // Check for which direction does wheel do. `sx` means `shift + wheel`\n\n\n  var wheelDirectionRef = useRef(null);\n  var wheelDirectionCleanRef = useRef(null);\n\n  function onWheel(event) {\n    if (!inVirtual) return; // Wait for 2 frame to clean direction\n\n    raf.cancel(wheelDirectionCleanRef.current);\n    wheelDirectionCleanRef.current = raf(function () {\n      wheelDirectionRef.current = null;\n    }, 2);\n    var deltaX = event.deltaX,\n        deltaY = event.deltaY,\n        shiftKey = event.shiftKey;\n    var mergedDeltaX = deltaX;\n    var mergedDeltaY = deltaY;\n\n    if (wheelDirectionRef.current === 'sx' || !wheelDirectionRef.current && (shiftKey || false) && deltaY && !deltaX) {\n      mergedDeltaX = deltaY;\n      mergedDeltaY = 0;\n      wheelDirectionRef.current = 'sx';\n    }\n\n    var absX = Math.abs(mergedDeltaX);\n    var absY = Math.abs(mergedDeltaY);\n\n    if (wheelDirectionRef.current === null) {\n      wheelDirectionRef.current = horizontalScroll && absX > absY ? 'x' : 'y';\n    }\n\n    if (wheelDirectionRef.current === 'y') {\n      onWheelY(event, mergedDeltaY);\n    } else {\n      onWheelX(event, mergedDeltaX);\n    }\n  } // A patch for firefox\n\n\n  function onFireFoxScroll(event) {\n    if (!inVirtual) return;\n    isMouseScrollRef.current = event.detail === wheelValueRef.current;\n  }\n\n  return [onWheel, onFireFoxScroll];\n}","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-virtual-list/es/hooks/useFrameWheel.js"],"names":["raf","useRef","isFF","useOriginScroll","useFrameWheel","inVirtual","isScrollAtTop","isScrollAtBottom","isScrollAtLeft","isScrollAtRight","horizontalScroll","onWheelDelta","offsetRef","nextFrameRef","wheelValueRef","isMouseScrollRef","originScroll","onWheelY","e","deltaY","cancel","current","event","_virtualHandled","preventDefault","patchMultiple","onWheelX","deltaX","wheelDirectionRef","wheelDirectionCleanRef","onWheel","shiftKey","mergedDeltaX","mergedDeltaY","absX","Math","abs","absY","onFireFoxScroll","detail"],"mappings":"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","sourcesContent":["import raf from \"rc-util/es/raf\";\nimport { useRef } from 'react';\nimport isFF from \"../utils/isFirefox\";\nimport useOriginScroll from \"./useOriginScroll\";\nexport default function useFrameWheel(inVirtual, isScrollAtTop, isScrollAtBottom, isScrollAtLeft, isScrollAtRight, horizontalScroll,\n/***\n * Return `true` when you need to prevent default event\n */\nonWheelDelta) {\n  var offsetRef = useRef(0);\n  var nextFrameRef = useRef(null);\n\n  // Firefox patch\n  var wheelValueRef = useRef(null);\n  var isMouseScrollRef = useRef(false);\n\n  // Scroll status sync\n  var originScroll = useOriginScroll(isScrollAtTop, isScrollAtBottom, isScrollAtLeft, isScrollAtRight);\n  function onWheelY(e, deltaY) {\n    raf.cancel(nextFrameRef.current);\n\n    // Do nothing when scroll at the edge, Skip check when is in scroll\n    if (originScroll(false, deltaY)) return;\n\n    // Skip if nest List has handled this event\n    var event = e;\n    if (!event._virtualHandled) {\n      event._virtualHandled = true;\n    } else {\n      return;\n    }\n    offsetRef.current += deltaY;\n    wheelValueRef.current = deltaY;\n\n    // Proxy of scroll events\n    if (!isFF) {\n      event.preventDefault();\n    }\n    nextFrameRef.current = raf(function () {\n      // Patch a multiple for Firefox to fix wheel number too small\n      // ref: https://github.com/ant-design/ant-design/issues/26372#issuecomment-679460266\n      var patchMultiple = isMouseScrollRef.current ? 10 : 1;\n      onWheelDelta(offsetRef.current * patchMultiple, false);\n      offsetRef.current = 0;\n    });\n  }\n  function onWheelX(event, deltaX) {\n    onWheelDelta(deltaX, true);\n    if (!isFF) {\n      event.preventDefault();\n    }\n  }\n\n  // Check for which direction does wheel do. `sx` means `shift + wheel`\n  var wheelDirectionRef = useRef(null);\n  var wheelDirectionCleanRef = useRef(null);\n  function onWheel(event) {\n    if (!inVirtual) return;\n\n    // Wait for 2 frame to clean direction\n    raf.cancel(wheelDirectionCleanRef.current);\n    wheelDirectionCleanRef.current = raf(function () {\n      wheelDirectionRef.current = null;\n    }, 2);\n    var deltaX = event.deltaX,\n      deltaY = event.deltaY,\n      shiftKey = event.shiftKey;\n    var mergedDeltaX = deltaX;\n    var mergedDeltaY = deltaY;\n    if (wheelDirectionRef.current === 'sx' || !wheelDirectionRef.current && (shiftKey || false) && deltaY && !deltaX) {\n      mergedDeltaX = deltaY;\n      mergedDeltaY = 0;\n      wheelDirectionRef.current = 'sx';\n    }\n    var absX = Math.abs(mergedDeltaX);\n    var absY = Math.abs(mergedDeltaY);\n    if (wheelDirectionRef.current === null) {\n      wheelDirectionRef.current = horizontalScroll && absX > absY ? 'x' : 'y';\n    }\n    if (wheelDirectionRef.current === 'y') {\n      onWheelY(event, mergedDeltaY);\n    } else {\n      onWheelX(event, mergedDeltaX);\n    }\n  }\n\n  // A patch for firefox\n  function onFireFoxScroll(event) {\n    if (!inVirtual) return;\n    isMouseScrollRef.current = event.detail === wheelValueRef.current;\n  }\n  return [onWheel, onFireFoxScroll];\n}"]},"metadata":{},"sourceType":"module"}