{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"fallback\", \"src\", \"imgRef\"],\n    _excluded2 = [\"prefixCls\", \"src\", \"alt\", \"imageInfo\", \"fallback\", \"movable\", \"onClose\", \"visible\", \"icons\", \"rootClassName\", \"closeIcon\", \"getContainer\", \"current\", \"count\", \"countRender\", \"scaleStep\", \"minScale\", \"maxScale\", \"transitionName\", \"maskTransitionName\", \"imageRender\", \"imgCommonProps\", \"toolbarRender\", \"onTransform\", \"onChange\"];\nimport classnames from 'classnames';\nimport Dialog from 'rc-dialog';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport Operations from \"./Operations\";\nimport { PreviewGroupContext } from \"./context\";\nimport useImageTransform from \"./hooks/useImageTransform\";\nimport useMouseEvent from \"./hooks/useMouseEvent\";\nimport useStatus from \"./hooks/useStatus\";\nimport useTouchEvent from \"./hooks/useTouchEvent\";\nimport { BASE_SCALE_RATIO } from \"./previewConfig\";\n\nvar PreviewImage = function PreviewImage(_ref) {\n  var fallback = _ref.fallback,\n      src = _ref.src,\n      imgRef = _ref.imgRef,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useStatus = useStatus({\n    src: src,\n    fallback: fallback\n  }),\n      _useStatus2 = _slicedToArray(_useStatus, 2),\n      getImgRef = _useStatus2[0],\n      srcAndOnload = _useStatus2[1];\n\n  return /*#__PURE__*/React.createElement(\"img\", _extends({\n    ref: function ref(_ref2) {\n      imgRef.current = _ref2;\n      getImgRef(_ref2);\n    }\n  }, props, srcAndOnload));\n};\n\nvar Preview = function Preview(props) {\n  var prefixCls = props.prefixCls,\n      src = props.src,\n      alt = props.alt,\n      imageInfo = props.imageInfo,\n      fallback = props.fallback,\n      _props$movable = props.movable,\n      movable = _props$movable === void 0 ? true : _props$movable,\n      onClose = props.onClose,\n      visible = props.visible,\n      _props$icons = props.icons,\n      icons = _props$icons === void 0 ? {} : _props$icons,\n      rootClassName = props.rootClassName,\n      closeIcon = props.closeIcon,\n      getContainer = props.getContainer,\n      _props$current = props.current,\n      current = _props$current === void 0 ? 0 : _props$current,\n      _props$count = props.count,\n      count = _props$count === void 0 ? 1 : _props$count,\n      countRender = props.countRender,\n      _props$scaleStep = props.scaleStep,\n      scaleStep = _props$scaleStep === void 0 ? 0.5 : _props$scaleStep,\n      _props$minScale = props.minScale,\n      minScale = _props$minScale === void 0 ? 1 : _props$minScale,\n      _props$maxScale = props.maxScale,\n      maxScale = _props$maxScale === void 0 ? 50 : _props$maxScale,\n      _props$transitionName = props.transitionName,\n      transitionName = _props$transitionName === void 0 ? 'zoom' : _props$transitionName,\n      _props$maskTransition = props.maskTransitionName,\n      maskTransitionName = _props$maskTransition === void 0 ? 'fade' : _props$maskTransition,\n      imageRender = props.imageRender,\n      imgCommonProps = props.imgCommonProps,\n      toolbarRender = props.toolbarRender,\n      onTransform = props.onTransform,\n      onChange = props.onChange,\n      restProps = _objectWithoutProperties(props, _excluded2);\n\n  var imgRef = useRef();\n  var groupContext = useContext(PreviewGroupContext);\n  var showLeftOrRightSwitches = groupContext && count > 1;\n  var showOperationsProgress = groupContext && count >= 1;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      enableTransition = _useState2[0],\n      setEnableTransition = _useState2[1];\n\n  var _useImageTransform = useImageTransform(imgRef, minScale, maxScale, onTransform),\n      transform = _useImageTransform.transform,\n      resetTransform = _useImageTransform.resetTransform,\n      updateTransform = _useImageTransform.updateTransform,\n      dispatchZoomChange = _useImageTransform.dispatchZoomChange;\n\n  var _useMouseEvent = useMouseEvent(imgRef, movable, visible, scaleStep, transform, updateTransform, dispatchZoomChange),\n      isMoving = _useMouseEvent.isMoving,\n      onMouseDown = _useMouseEvent.onMouseDown,\n      onWheel = _useMouseEvent.onWheel;\n\n  var _useTouchEvent = useTouchEvent(imgRef, movable, visible, minScale, transform, updateTransform, dispatchZoomChange),\n      isTouching = _useTouchEvent.isTouching,\n      onTouchStart = _useTouchEvent.onTouchStart,\n      onTouchMove = _useTouchEvent.onTouchMove,\n      onTouchEnd = _useTouchEvent.onTouchEnd;\n\n  var rotate = transform.rotate,\n      scale = transform.scale;\n  var wrapClassName = classnames(_defineProperty({}, \"\".concat(prefixCls, \"-moving\"), isMoving));\n  useEffect(function () {\n    if (!enableTransition) {\n      setEnableTransition(true);\n    }\n  }, [enableTransition]);\n\n  var onAfterClose = function onAfterClose() {\n    resetTransform('close');\n  };\n\n  var onZoomIn = function onZoomIn() {\n    dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, 'zoomIn');\n  };\n\n  var onZoomOut = function onZoomOut() {\n    dispatchZoomChange(BASE_SCALE_RATIO / (BASE_SCALE_RATIO + scaleStep), 'zoomOut');\n  };\n\n  var onRotateRight = function onRotateRight() {\n    updateTransform({\n      rotate: rotate + 90\n    }, 'rotateRight');\n  };\n\n  var onRotateLeft = function onRotateLeft() {\n    updateTransform({\n      rotate: rotate - 90\n    }, 'rotateLeft');\n  };\n\n  var onFlipX = function onFlipX() {\n    updateTransform({\n      flipX: !transform.flipX\n    }, 'flipX');\n  };\n\n  var onFlipY = function onFlipY() {\n    updateTransform({\n      flipY: !transform.flipY\n    }, 'flipY');\n  };\n\n  var onReset = function onReset() {\n    resetTransform('reset');\n  };\n\n  var onActive = function onActive(offset) {\n    var position = current + offset;\n\n    if (!Number.isInteger(position) || position < 0 || position > count - 1) {\n      return;\n    }\n\n    setEnableTransition(false);\n    resetTransform(offset < 0 ? 'prev' : 'next');\n    onChange === null || onChange === void 0 || onChange(position, current);\n  };\n\n  var onKeyDown = function onKeyDown(event) {\n    if (!visible || !showLeftOrRightSwitches) return;\n\n    if (event.keyCode === KeyCode.LEFT) {\n      onActive(-1);\n    } else if (event.keyCode === KeyCode.RIGHT) {\n      onActive(1);\n    }\n  };\n\n  var onDoubleClick = function onDoubleClick(event) {\n    if (visible) {\n      if (scale !== 1) {\n        updateTransform({\n          x: 0,\n          y: 0,\n          scale: 1\n        }, 'doubleClick');\n      } else {\n        dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, 'doubleClick', event.clientX, event.clientY);\n      }\n    }\n  };\n\n  useEffect(function () {\n    var onKeyDownListener = addEventListener(window, 'keydown', onKeyDown, false);\n    return function () {\n      onKeyDownListener.remove();\n    };\n  }, [visible, showLeftOrRightSwitches, current]);\n  var imgNode = /*#__PURE__*/React.createElement(PreviewImage, _extends({}, imgCommonProps, {\n    width: props.width,\n    height: props.height,\n    imgRef: imgRef,\n    className: \"\".concat(prefixCls, \"-img\"),\n    alt: alt,\n    style: {\n      transform: \"translate3d(\".concat(transform.x, \"px, \").concat(transform.y, \"px, 0) scale3d(\").concat(transform.flipX ? '-' : '').concat(scale, \", \").concat(transform.flipY ? '-' : '').concat(scale, \", 1) rotate(\").concat(rotate, \"deg)\"),\n      transitionDuration: (!enableTransition || isTouching) && '0s'\n    },\n    fallback: fallback,\n    src: src,\n    onWheel: onWheel,\n    onMouseDown: onMouseDown,\n    onDoubleClick: onDoubleClick,\n    onTouchStart: onTouchStart,\n    onTouchMove: onTouchMove,\n    onTouchEnd: onTouchEnd,\n    onTouchCancel: onTouchEnd\n  }));\n\n  var image = _objectSpread({\n    url: src,\n    alt: alt\n  }, imageInfo);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, _extends({\n    transitionName: transitionName,\n    maskTransitionName: maskTransitionName,\n    closable: false,\n    keyboard: true,\n    prefixCls: prefixCls,\n    onClose: onClose,\n    visible: visible,\n    classNames: {\n      wrapper: wrapClassName\n    },\n    rootClassName: rootClassName,\n    getContainer: getContainer\n  }, restProps, {\n    afterClose: onAfterClose\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-img-wrapper\")\n  }, imageRender ? imageRender(imgNode, _objectSpread({\n    transform: transform,\n    image: image\n  }, groupContext ? {\n    current: current\n  } : {})) : imgNode)), /*#__PURE__*/React.createElement(Operations, {\n    visible: visible,\n    transform: transform,\n    maskTransitionName: maskTransitionName,\n    closeIcon: closeIcon,\n    getContainer: getContainer,\n    prefixCls: prefixCls,\n    rootClassName: rootClassName,\n    icons: icons,\n    countRender: countRender,\n    showSwitch: showLeftOrRightSwitches,\n    showProgress: showOperationsProgress,\n    current: current,\n    count: count,\n    scale: scale,\n    minScale: minScale,\n    maxScale: maxScale,\n    toolbarRender: toolbarRender,\n    onActive: onActive,\n    onZoomIn: onZoomIn,\n    onZoomOut: onZoomOut,\n    onRotateRight: onRotateRight,\n    onRotateLeft: onRotateLeft,\n    onFlipX: onFlipX,\n    onFlipY: onFlipY,\n    onClose: onClose,\n    onReset: onReset,\n    zIndex: restProps.zIndex !== undefined ? restProps.zIndex + 1 : undefined,\n    image: image\n  }));\n};\n\nexport default Preview;","map":{"version":3,"sources":["/Users/malith_bandara/Desktop/AdminDashboard/node_modules/rc-image/es/Preview.js"],"names":["_objectSpread","_defineProperty","_extends","_slicedToArray","_objectWithoutProperties","_excluded","_excluded2","classnames","Dialog","addEventListener","KeyCode","React","useContext","useEffect","useRef","useState","Operations","PreviewGroupContext","useImageTransform","useMouseEvent","useStatus","useTouchEvent","BASE_SCALE_RATIO","PreviewImage","_ref","fallback","src","imgRef","props","_useStatus","_useStatus2","getImgRef","srcAndOnload","createElement","ref","_ref2","current","Preview","prefixCls","alt","imageInfo","_props$movable","movable","onClose","visible","_props$icons","icons","rootClassName","closeIcon","getContainer","_props$current","_props$count","count","countRender","_props$scaleStep","scaleStep","_props$minScale","minScale","_props$maxScale","maxScale","_props$transitionName","transitionName","_props$maskTransition","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange","restProps","groupContext","showLeftOrRightSwitches","showOperationsProgress","_useState","_useState2","enableTransition","setEnableTransition","_useImageTransform","transform","resetTransform","updateTransform","dispatchZoomChange","_useMouseEvent","isMoving","onMouseDown","onWheel","_useTouchEvent","isTouching","onTouchStart","onTouchMove","onTouchEnd","rotate","scale","wrapClassName","concat","onAfterClose","onZoomIn","onZoomOut","onRotateRight","onRotateLeft","onFlipX","flipX","onFlipY","flipY","onReset","onActive","offset","position","Number","isInteger","onKeyDown","event","keyCode","LEFT","RIGHT","onDoubleClick","x","y","clientX","clientY","onKeyDownListener","window","remove","imgNode","width","height","className","style","transitionDuration","onTouchCancel","image","url","Fragment","closable","keyboard","classNames","wrapper","afterClose","showSwitch","showProgress","zIndex","undefined"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"fallback\", \"src\", \"imgRef\"],\n  _excluded2 = [\"prefixCls\", \"src\", \"alt\", \"imageInfo\", \"fallback\", \"movable\", \"onClose\", \"visible\", \"icons\", \"rootClassName\", \"closeIcon\", \"getContainer\", \"current\", \"count\", \"countRender\", \"scaleStep\", \"minScale\", \"maxScale\", \"transitionName\", \"maskTransitionName\", \"imageRender\", \"imgCommonProps\", \"toolbarRender\", \"onTransform\", \"onChange\"];\nimport classnames from 'classnames';\nimport Dialog from 'rc-dialog';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport Operations from \"./Operations\";\nimport { PreviewGroupContext } from \"./context\";\nimport useImageTransform from \"./hooks/useImageTransform\";\nimport useMouseEvent from \"./hooks/useMouseEvent\";\nimport useStatus from \"./hooks/useStatus\";\nimport useTouchEvent from \"./hooks/useTouchEvent\";\nimport { BASE_SCALE_RATIO } from \"./previewConfig\";\nvar PreviewImage = function PreviewImage(_ref) {\n  var fallback = _ref.fallback,\n    src = _ref.src,\n    imgRef = _ref.imgRef,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useStatus = useStatus({\n      src: src,\n      fallback: fallback\n    }),\n    _useStatus2 = _slicedToArray(_useStatus, 2),\n    getImgRef = _useStatus2[0],\n    srcAndOnload = _useStatus2[1];\n  return /*#__PURE__*/React.createElement(\"img\", _extends({\n    ref: function ref(_ref2) {\n      imgRef.current = _ref2;\n      getImgRef(_ref2);\n    }\n  }, props, srcAndOnload));\n};\nvar Preview = function Preview(props) {\n  var prefixCls = props.prefixCls,\n    src = props.src,\n    alt = props.alt,\n    imageInfo = props.imageInfo,\n    fallback = props.fallback,\n    _props$movable = props.movable,\n    movable = _props$movable === void 0 ? true : _props$movable,\n    onClose = props.onClose,\n    visible = props.visible,\n    _props$icons = props.icons,\n    icons = _props$icons === void 0 ? {} : _props$icons,\n    rootClassName = props.rootClassName,\n    closeIcon = props.closeIcon,\n    getContainer = props.getContainer,\n    _props$current = props.current,\n    current = _props$current === void 0 ? 0 : _props$current,\n    _props$count = props.count,\n    count = _props$count === void 0 ? 1 : _props$count,\n    countRender = props.countRender,\n    _props$scaleStep = props.scaleStep,\n    scaleStep = _props$scaleStep === void 0 ? 0.5 : _props$scaleStep,\n    _props$minScale = props.minScale,\n    minScale = _props$minScale === void 0 ? 1 : _props$minScale,\n    _props$maxScale = props.maxScale,\n    maxScale = _props$maxScale === void 0 ? 50 : _props$maxScale,\n    _props$transitionName = props.transitionName,\n    transitionName = _props$transitionName === void 0 ? 'zoom' : _props$transitionName,\n    _props$maskTransition = props.maskTransitionName,\n    maskTransitionName = _props$maskTransition === void 0 ? 'fade' : _props$maskTransition,\n    imageRender = props.imageRender,\n    imgCommonProps = props.imgCommonProps,\n    toolbarRender = props.toolbarRender,\n    onTransform = props.onTransform,\n    onChange = props.onChange,\n    restProps = _objectWithoutProperties(props, _excluded2);\n  var imgRef = useRef();\n  var groupContext = useContext(PreviewGroupContext);\n  var showLeftOrRightSwitches = groupContext && count > 1;\n  var showOperationsProgress = groupContext && count >= 1;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    enableTransition = _useState2[0],\n    setEnableTransition = _useState2[1];\n  var _useImageTransform = useImageTransform(imgRef, minScale, maxScale, onTransform),\n    transform = _useImageTransform.transform,\n    resetTransform = _useImageTransform.resetTransform,\n    updateTransform = _useImageTransform.updateTransform,\n    dispatchZoomChange = _useImageTransform.dispatchZoomChange;\n  var _useMouseEvent = useMouseEvent(imgRef, movable, visible, scaleStep, transform, updateTransform, dispatchZoomChange),\n    isMoving = _useMouseEvent.isMoving,\n    onMouseDown = _useMouseEvent.onMouseDown,\n    onWheel = _useMouseEvent.onWheel;\n  var _useTouchEvent = useTouchEvent(imgRef, movable, visible, minScale, transform, updateTransform, dispatchZoomChange),\n    isTouching = _useTouchEvent.isTouching,\n    onTouchStart = _useTouchEvent.onTouchStart,\n    onTouchMove = _useTouchEvent.onTouchMove,\n    onTouchEnd = _useTouchEvent.onTouchEnd;\n  var rotate = transform.rotate,\n    scale = transform.scale;\n  var wrapClassName = classnames(_defineProperty({}, \"\".concat(prefixCls, \"-moving\"), isMoving));\n  useEffect(function () {\n    if (!enableTransition) {\n      setEnableTransition(true);\n    }\n  }, [enableTransition]);\n  var onAfterClose = function onAfterClose() {\n    resetTransform('close');\n  };\n  var onZoomIn = function onZoomIn() {\n    dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, 'zoomIn');\n  };\n  var onZoomOut = function onZoomOut() {\n    dispatchZoomChange(BASE_SCALE_RATIO / (BASE_SCALE_RATIO + scaleStep), 'zoomOut');\n  };\n  var onRotateRight = function onRotateRight() {\n    updateTransform({\n      rotate: rotate + 90\n    }, 'rotateRight');\n  };\n  var onRotateLeft = function onRotateLeft() {\n    updateTransform({\n      rotate: rotate - 90\n    }, 'rotateLeft');\n  };\n  var onFlipX = function onFlipX() {\n    updateTransform({\n      flipX: !transform.flipX\n    }, 'flipX');\n  };\n  var onFlipY = function onFlipY() {\n    updateTransform({\n      flipY: !transform.flipY\n    }, 'flipY');\n  };\n  var onReset = function onReset() {\n    resetTransform('reset');\n  };\n  var onActive = function onActive(offset) {\n    var position = current + offset;\n    if (!Number.isInteger(position) || position < 0 || position > count - 1) {\n      return;\n    }\n    setEnableTransition(false);\n    resetTransform(offset < 0 ? 'prev' : 'next');\n    onChange === null || onChange === void 0 || onChange(position, current);\n  };\n  var onKeyDown = function onKeyDown(event) {\n    if (!visible || !showLeftOrRightSwitches) return;\n    if (event.keyCode === KeyCode.LEFT) {\n      onActive(-1);\n    } else if (event.keyCode === KeyCode.RIGHT) {\n      onActive(1);\n    }\n  };\n  var onDoubleClick = function onDoubleClick(event) {\n    if (visible) {\n      if (scale !== 1) {\n        updateTransform({\n          x: 0,\n          y: 0,\n          scale: 1\n        }, 'doubleClick');\n      } else {\n        dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, 'doubleClick', event.clientX, event.clientY);\n      }\n    }\n  };\n  useEffect(function () {\n    var onKeyDownListener = addEventListener(window, 'keydown', onKeyDown, false);\n    return function () {\n      onKeyDownListener.remove();\n    };\n  }, [visible, showLeftOrRightSwitches, current]);\n  var imgNode = /*#__PURE__*/React.createElement(PreviewImage, _extends({}, imgCommonProps, {\n    width: props.width,\n    height: props.height,\n    imgRef: imgRef,\n    className: \"\".concat(prefixCls, \"-img\"),\n    alt: alt,\n    style: {\n      transform: \"translate3d(\".concat(transform.x, \"px, \").concat(transform.y, \"px, 0) scale3d(\").concat(transform.flipX ? '-' : '').concat(scale, \", \").concat(transform.flipY ? '-' : '').concat(scale, \", 1) rotate(\").concat(rotate, \"deg)\"),\n      transitionDuration: (!enableTransition || isTouching) && '0s'\n    },\n    fallback: fallback,\n    src: src,\n    onWheel: onWheel,\n    onMouseDown: onMouseDown,\n    onDoubleClick: onDoubleClick,\n    onTouchStart: onTouchStart,\n    onTouchMove: onTouchMove,\n    onTouchEnd: onTouchEnd,\n    onTouchCancel: onTouchEnd\n  }));\n  var image = _objectSpread({\n    url: src,\n    alt: alt\n  }, imageInfo);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, _extends({\n    transitionName: transitionName,\n    maskTransitionName: maskTransitionName,\n    closable: false,\n    keyboard: true,\n    prefixCls: prefixCls,\n    onClose: onClose,\n    visible: visible,\n    classNames: {\n      wrapper: wrapClassName\n    },\n    rootClassName: rootClassName,\n    getContainer: getContainer\n  }, restProps, {\n    afterClose: onAfterClose\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-img-wrapper\")\n  }, imageRender ? imageRender(imgNode, _objectSpread({\n    transform: transform,\n    image: image\n  }, groupContext ? {\n    current: current\n  } : {})) : imgNode)), /*#__PURE__*/React.createElement(Operations, {\n    visible: visible,\n    transform: transform,\n    maskTransitionName: maskTransitionName,\n    closeIcon: closeIcon,\n    getContainer: getContainer,\n    prefixCls: prefixCls,\n    rootClassName: rootClassName,\n    icons: icons,\n    countRender: countRender,\n    showSwitch: showLeftOrRightSwitches,\n    showProgress: showOperationsProgress,\n    current: current,\n    count: count,\n    scale: scale,\n    minScale: minScale,\n    maxScale: maxScale,\n    toolbarRender: toolbarRender,\n    onActive: onActive,\n    onZoomIn: onZoomIn,\n    onZoomOut: onZoomOut,\n    onRotateRight: onRotateRight,\n    onRotateLeft: onRotateLeft,\n    onFlipX: onFlipX,\n    onFlipY: onFlipY,\n    onClose: onClose,\n    onReset: onReset,\n    zIndex: restProps.zIndex !== undefined ? restProps.zIndex + 1 : undefined,\n    image: image\n  }));\n};\nexport default Preview;"]},"metadata":{},"sourceType":"module"}